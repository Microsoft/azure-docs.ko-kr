---
title: 동일한 입력에 대한 Azure Functions 디자인
description: idempotent가 될 Azure Functions 빌드
author: craigshoemaker
ms.author: cshoe
ms.date: 9/12/2019
ms.topic: article
ms.openlocfilehash: 15af60ac5a862e6fb20e65ba6fbb92482420b7c0
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/29/2021
ms.locfileid: "74226868"
---
# <a name="designing-azure-functions-for-identical-input"></a>동일한 입력에 대한 Azure Functions 디자인

이벤트 구동 및 메시지 기반 아키텍처는 현실적으로 동일한 요청을 수락하면서 데이터 무결성과 시스템 안정성을 유지해야 합니다.

이를 설명하기 위해 엘리베이터 호출 단추를 살펴보겠습니다. 단추를 누르면 단추에 불이 켜지고 엘리베이터가 현재 층에 도착합니다. 잠시 후에 다른 사람이 로비에서 들어옵니다. 이 사람이 당신을 향해 웃으며 불이 켜진 단추를 다시 누릅니다. 엘리베이터를 호출하는 명령이 멱등적이라는 것이 떠올라 미소를 지었습니다.

엘리베이터 호출 단추를 두 번, 세 번 또는 네 번 눌러도 최종 결과는 달라지지 않습니다. 단추를 누르면 횟수에 관계없이 엘리베이터가 현재 층에 도착합니다. 엘리베이터와 마찬가지로 멱등적 시스템은 동일한 명령을 실행한 횟수에 관계없이 동일한 결과를 생성합니다.

애플리케이션을 빌드하는 경우 다음 시나리오를 고려하세요.

- 인벤토리 제어 애플리케이션이 동일한 제품을 두 번 이상 삭제하려고 하면 어떻게 되나요?
- 동일한 사람에 대한 직원 레코드를 만드는 요청이 두 개 이상 있을 경우 인사 관리 애플리케이션이 어떻게 동작하나요?
- 은행 앱이 동일한 금액을 출금하는 100개 요청을 가져오는 경우 돈이 어디로 이동하나요?

함수에 대한 요청이 동일한 명령을 받을 수 있는 여러 컨텍스트가 있습니다. 예를 들어 다음과 같은 경우입니다.

- 동일한 요청을 여러 번 보내는 재시도 정책
- 애플리케이션에 재생된 캐시된 명령
- 동일한 요청을 여러 개 보내는 애플리케이션 오류

데이터 무결성 및 시스템 상태를 보호하기 위해 idempotent 애플리케이션에는 다음 동작을 포함할 수 있는 논리가 포함되어 있습니다.

- 삭제를 실행하기 전에 데이터가 있는지 확인
- 만들기 작업을 실행하기 전에 데이터가 이미 있는지 확인
- 데이터의 최종 일관성을 만드는 논리 조정
- 동시성 제어
- 중복 검색
- 데이터 새로 고침 유효성 검사
- 입력 데이터를 확인하기 위한 가드 논리

궁극적으로 멱등성는 지정된 작업이 가능하고 한 번만 실행되도록 하여 구현할 수 있습니다.
