---
title: Azure SignalR Service에 대 한 성능 가이드
description: Azure SignalR Service의 성능 간략히 설명 합니다.
author: sffamily
ms.service: signalr
ms.topic: conceptual
ms.date: 04/08/2019
ms.author: zhshang
ms.openlocfilehash: f7cc05c8c2a299d809c4386d119fef58fa2548d5
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61269498"
---
# <a name="performance-guide-for-azure-signalr-service"></a>Azure SignalR Service에 대 한 성능 가이드

Azure SignalR Service를 사용 하는 주요 이점 중 하나는 SignalR 응용 프로그램 크기 조정의 용이성입니다. 대규모 시나리오에서 성능이 중요 한 요인이 됩니다. 

이 가이드에서는 SignalR 응용 프로그램 성능에 영향을 주는 요소를 소개 합니다. 다양 한 사용 사례 시나리오에서 일반적인 성능을 설명 하겠습니다. 마지막으로, 환경 및 성능 보고서를 생성 하는 데 사용할 수 있는 도구를 소개 합니다.

## <a name="term-definitions"></a>용어 정의

*인바운드*: Azure SignalR Service에는 들어오는 메시지입니다.

*아웃 바운드*: Azure SignalR Service에서 보내는 메시지입니다.

*Bandwidth*: 1 초에 모든 메시지의 총 크기입니다.

*기본 모드*: Azure SignalR Service 인스턴스를 만들 때 기본 작업 모드입니다. Azure SignalR Service는 응용 프로그램 서버에 연결할 것을 사용 하 여 모든 클라이언트 연결을 허용 하기 전에 필요 합니다.

*서버 리스 모드*: Azure SignalR Service는 클라이언트 연결만 수락 하는 모드입니다. 서버 연결 없음 허용 됩니다.

## <a name="overview"></a>개요

Azure SignalR Service는 다양 한 성능 용량에 대 한 7 개의 표준 계층을 정의합니다. 이 가이드에서는 다음 질문에 대답 합니다.

-   각 계층에 대 한 일반적인 Azure SignalR Service 성능 이란?

-   Azure SignalR Service 메시지 처리량 (예를 들어, 보내는 100,000 메시지 수 / 초)에 대 한 요구 사항에 충족 됩니까?

-   내 특정 시나리오의 경우 계층 내에 적합 한? 또는 적절 한 계층을 선택할 수는 어떻게?

-   앱 서버 (VM 크기)의 종류는 내게 적합? 얼마나 많은 해야 배포 합니까?

이러한 질문에 답하기 위해이 가이드는 먼저 성능에 영향을 주는 요소에 대 한 높은 수준의 설명을 제공 합니다. 다음 일반적인 사용 사례에 대 한 모든 계층에 대 한 최대 인바운드 및 아웃 바운드 메시지에 설명 합니다. **echo**, **브로드캐스트**, **그룹에 송신**, 및 **보내기 연결** (피어 투 피어 채팅).

이 가이드는 모든 시나리오를 다룰 수는 없습니다 (및 다른 사용 사례, 메시지 크기, 메시지 전송 패턴 및 등). 하지만 수 있도록 일부 메서드를 제공 합니다.

- 인바운드 또는 아웃 바운드 메시지에 대 한 대략적인 요구 사항을 평가 합니다.
- 성능 테이블을 확인 하 여 적절 한 계층을 찾습니다.

## <a name="performance-insight"></a>성능 insight

이 섹션에서는 성능 평가 방법에 설명 하 고 성능에 영향을 주는 모든 요소를 나열 합니다. 결과적으로 성능 요구 사항을 평가 하는 데는 메서드를 제공 합니다.

### <a name="methodology"></a>방법

*처리량* 하 고 *대기 시간* 다음 두 가지 일반적인 성능 검사 합니다. Azure SignalR Service에 대 한 각 SKU 계층에는 자체 처리량 정책 제한 합니다. 정책 정의 *허용 되는 최대 처리량 (인바운드 및 아웃 바운드 대역폭)* 메시지의 99 %1 초 미만의 대기 시간이 있는 경우 최대 달성 된 처리량으로 합니다.

대기 시간은 Azure SignalR Service에서 응답 메시지를 수신 하는 메시지를 보내는 연결의 시간 범위입니다. 살펴보겠습니다 **echo** 예입니다. 메시지에 타임 스탬프를 추가 하는 모든 클라이언트 연결 합니다. 앱 서버의 허브 클라이언트에 다시 원래 메시지를 보냅니다. 따라서 전파 지연 모든 클라이언트 연결에서 쉽게 계산 됩니다. 모든 메시지에 대 한 연결 된 타임 스탬프 **브로드캐스트**, **그룹에 송신**, 및 **연결에 보내는**합니다.

수천 개의 동시 클라이언트 연결을 시뮬레이트하기 위해 여러 Vm은 Azure에서 개인 가상 네트워크에 생성 됩니다. 이러한 Vm의 모든 동일한 Azure SignalR Service 인스턴스에 연결 합니다.

Azure SignalR Service의 기본 모드에서 앱 서버 Vm은 동일한 가상 개인 네트워크에 클라이언트 Vm에 배포 됩니다. 모든 클라이언트 Vm 및 앱 서버 Vm 지역 간 대기 시간을 방지 하려면 동일한 지역의 동일한 네트워크에 배포 됩니다.

### <a name="performance-factors"></a>성능 요인

이론적으로 Azure SignalR Service 용량 계산 리소스에 의해 제한 됩니다. CPU, 메모리 및 네트워크를 선택 합니다. 예를 들어, Azure SignalR Service에 대 한 자세한 연결 하면 서비스가 더 많은 메모리를 사용 합니다. 큰 메시지 트래픽에 대 한 (예를 들어, 모든 메시지는 2,048 바이트 보다 큰) Azure SignalR Service 트래픽을 처리 하는 데 더 많은 CPU 사이클을 소비 해야 합니다. 한편 Azure 네트워크 대역폭은 최대 트래픽에 대 한 제한을 적용 합니다.

전송 형식에는 성능에 영향을 주는 또 다른 요소입니다. 세 가지 형식 [WebSocket](https://en.wikipedia.org/wiki/WebSocket)를 [서버 전송 이벤트](https://en.wikipedia.org/wiki/Server-sent_events), 및 [긴 폴링](https://en.wikipedia.org/wiki/Push_technology)합니다. 

WebSocket은 TCP 연결 하나를 통해 양방향 및 전이중 통신 프로토콜. 서버 전송 이벤트는 서버에서 클라이언트로의 푸시 메시지를 단방향 프로토콜. 긴 폴링 클라이언트가 HTTP 요청을 통해 서버에서 정보를 정기적으로 폴링하여 필요 합니다. 같은 조건에서 동일한 API에 대 한 WebSocket에 최상의 성능을, 서버 전송 이벤트는 느립니다 이며 긴 폴링 가장 느린 작업입니다. Azure SignalR Service는 기본적으로 WebSocket을 권장합니다.

메시지 라우팅 비용은 성능을 제한 됩니다. Azure SignalR Service 클라이언트 또는 서버 집합에서 다른 클라이언트 또는 서버에 메시지를 라우팅하는 메시지 라우터 역할을 합니다. 다른 시나리오 또는 API를 다른 라우팅 정책에 필요합니다. 

에 대 한 **echo**, 클라이언트 자체에 메시지를 보냅니다 및 라우팅 대상 자체 이기도 합니다. 이 패턴에 가장 낮은 라우팅 비용. 대해서 **브로드캐스트**를 **그룹에 송신**, 및 **연결 보내기**를 Azure SignalR Service를 대상 연결을 통해 분산된 된 내부 데이터를 조회 해야 합니다. 구조체입니다. 이 추가 처리는 더 많은 CPU, 메모리 및 네트워크 대역폭을 사용합니다. 결과적으로 성능이 저하 됩니다.

기본 모드에서 앱 서버는 특정 시나리오에 대 한 병목 현상이 일어날 수 있습니다. Azure SignalR SDK는 하트 비트 신호를 통해 모든 클라이언트를 사용 하 여 라이브 연결을 유지 관리 하는 동안에 허브를 호출 해야 합니다.

서버 리스 모드 클라이언트 WebSocket 만큼 효율적이 지 되지 않는 HTTP post로 메시지를 보냅니다.

또 다른 요소는 프로토콜: JSON 및 [MessagePack](https://msgpack.org/index.html)합니다. MessagePack은 JSON 보다 빠르게 크기가 작고 배달 됩니다. MessagePack 성능을 하지만 향상 되지 않을 수 있습니다. Azure SignalR Service의 성능을 아니므로 프로토콜에 중요 한 서버로 또는 그 반대로 클라이언트에서 메시지를 전달 하는 동안 메시지 페이로드를 디코딩 하지 것입니다.

요약 하자면, 다음과 같은 요인을 인바운드 및 아웃 바운드 용량에 영향을 줄:

-   SKU 계층 (U/메모리)

-   연결 수

-   메시지 크기

-   메시지 전송 속도

-   전송 유형 (WebSocket을 서버-전송-이벤트 또는 긴 폴링)

-   사용 사례 시나리오 (라우팅 비용)

-   앱 서버 및 서비스 연결 (서버 모드)


### <a name="finding-a-proper-sku"></a>적절 한 SKU를 찾는

수 인바운드/아웃 바운드 용량을 평가 하거나 찾는 방법 계층은 특정 사용 사례에 적합 한?

앱 서버 만큼 충분히 강력 하 고 성능에 병목 현상이 없는 가정 합니다. 그런 다음 모든 계층에 대 한 최대 인바운드 및 아웃 바운드 대역폭을 확인 합니다.

#### <a name="quick-evaluation"></a>빠른 평가

일부 기본 설정 가정 하 여 계산을 먼저 단순화 해 보겠습니다. 

- 전송 유형 WebSocket입니다.
- 메시지 크기가 2,048 바이트입니다.
- 1 초 마다 전송 됩니다.
- Azure SignalR Service는 기본 모드입니다.

모든 계층에는 고유한 최대 인바운드 대역폭 및 아웃 바운드 대역폭입니다. 인바운드 또는 아웃 바운드 연결 제한을 초과 하면 원활한 사용자 환경을 보장 되지 않습니다.

**Echo** 라우팅 최저 비용 있기 때문에 최대 인바운드 대역폭을 제공 합니다. **브로드캐스트** 아웃 바운드 메시지를 최대 대역폭을 정의 합니다.

수행할 *되지* 다음 두 테이블에서 강조 표시 된 값을 초과 합니다.

|       echo                        | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|-----------------------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결                       | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| **인바운드 대역폭** | **2mbps**    | **4 MBps**    | **10mbps**   | **20mbps**    | **40 MBps**    | **100mbps**   | **200mbps**    |
| 아웃 바운드 대역폭 | 2MBps   | 4MBps   | 10MBps  | 20mbps   | 40 MBps   | 100mbps  | 200mbps   |


|     브로드캐스트             | Unit1 | Unit2 | Unit5  | Unit10 | Unit20 | Unit50  | Unit100 |
|---------------------------|-------|-------|--------|--------|--------|---------|---------|
| 연결               | 1,000 | 2,000 | 5,000  | 10000 | 20,000 | 50,000  | 100,000 |
| 인바운드 대역폭  | 4 kBps   | 4 kBps   | 4 kBps    | 4 kBps    | 4 kBps    | 4 kBps     | 4 kBps    |
| **아웃 바운드 대역폭** | **4 MBps**    | **8 MBps**    | **20mbps**    | **40 MBps**    | **80 MBps**    | **200mbps**    | **400 MBps**   |

*인바운드 대역폭* 하 고 *아웃 바운드 대역폭* 초당 총 메시지 크기입니다.  수식에는 다음과 같습니다.
```
  inboundBandwidth = inboundConnections * messageSize / sendInterval
  outboundBandwidth = outboundConnections * messageSize / sendInterval
```

- *inboundConnections*: 메시지를 보내는 연결의 수입니다.

- *outboundConnections*: 메시지를 수신 하는 연결 횟수입니다.

- *messageSize*: 단일 메시지 (평균 값)의 크기입니다. 보다 작거나 1, 024 바이트는 1,024 바이트 메시지와 비슷한 성능에 미치는 영향이 작은 메시지입니다.

- *sendInterval*: 하나의 메시지를 보내는 시간입니다. 일반적으로 1 초당 메시지 1 초 마다 하나의 메시지를 보내는 것을 의미 하는 것입니다. 작은 간격 기간 내에 더 많은 메시지를 보내는 것을 의미 합니다. 예를 들어 메시지당 0.5 초는 1 초 마다 두 개의 메시지를 보내는 의미 합니다.

- *연결*: 커밋된 최대 임계값 Azure SignalR Service에 대 한 모든 계층에 대 한 합니다. 연결 수를 더 늘어날 경우에 연결 제한에서 저하 됩니다.

#### <a name="evaluation-for-complex-use-cases"></a>복잡 한 사용 사례에 대 한 평가

##### <a name="bigger-message-size-or-different-sending-rate"></a>큰 메시지 크기 또는 다른 송신 율

실제 사용 사례는 더 복잡 합니다. 2,048 바이트 보다 큰 메시지를 전송 될 수 있습니다 것 또는 보내는 메시지 속도가 초당 하나의 메시지에 없습니다. 예를 들어 해당 성능을 평가 하는 방법을 찾을 Unit100의 브로드캐스트를 살펴보겠습니다.

다음 표에서의 실제 사용 사례를 보여 줍니다 **브로드캐스트**합니다. 하지만 메시지 크기, 연결 수 및 속도 보내는 메시지는 이전 섹션에서 가정 내용에서 다릅니다. 질문 하는 방법을 추론할 수 있습니다 (메시지 크기, 연결 개수 또는 메시지 송신 율) 이러한 항목 중 두 개만 알고 있다면입니다.

| 브로드캐스트  | 메시지 크기 | 인바운드 메시지 수 / 초 | 연결 | 보내기 간격 |
|---|---------------------|--------------------------|-------------|-------------------------|
| 1 | 20 (KB)                | 1                        | 100,000     | 5초                      |
| 2 | 256 KB               | 1                        | 8,000       | 5초                      |

다음 수식은 다음과 같습니다. 유추 쉽게 이전 하는 수식을 기준

```
outboundConnections = outboundBandwidth * sendInterval / messageSize
```

Unit100에 대 한 최대 아웃 바운드 대역폭은 이전 테이블에서 400입니다. 20 16KB의 메시지 크기를 아웃 바운드 연결의 최대 400MB 해야 \* 5 / 20 (kb) = 100, 000와 일치 하는 값은 실제 값입니다.

##### <a name="mixed-use-cases"></a>혼합된 사용 사례

실제 사용 사례는 일반적으로 혼합 네 가지 기본 사용 사례를 함께: **echo**를 **브로드캐스트**를 **그룹에 송신**, 및 **연결 보내기**합니다. 용량을 평가 하는 데 사용 하는 방법을 다음과 같습니다.

1. 네 가지 기본 사용 사례를 혼합된 사용 사례를 나눕니다.
1. 개별적으로 이전 하는 수식을 사용 하 여 인바운드 및 아웃 바운드 메시지를 최대 대역폭을 계산 합니다.
1. 대역폭 계산 최대 총 인바운드/아웃 바운드 대역폭을 합계를 계산 합니다. 

최대 인바운드/아웃 바운드 대역폭 테이블에서 적절 한 계층을 선택 합니다.

> [!NOTE]
> 수백 또는 수천 개의 작은 그룹의 메시지를 보내는 또는 수천 개의 서로 다른 메시지를 보내는 클라이언트에 대 한 라우팅 비용 기준 됩니다. 계정에이 영향을 수행 합니다.

클라이언트에 메시지를 보내는 사용 사례에 대 한 앱 서버 인지 확인 *되지* 병목 상태가 발생 합니다. "사례 연구" 섹션을 다음 지침을 제공 해야 얼마나 많은 앱 서버 및 서버 연결 수 구성 해야 합니다.

## <a name="case-study"></a>사례 연구

WebSocket 전송에 대 한 4 가지 일반적인 사용 사례를 통해 다음 섹션에서는 이동: **echo**를 **브로드캐스트**를 **그룹에 송신**, 및 **연결보내기**. 각 시나리오에서는 Azure SignalR Service에 대 한 현재 인바운드 및 아웃 바운드 용량을 단원을 참조 하십시오. 또한 성능에 영향을 주는 주요 요소를 설명 합니다.

기본 모드에서 응용 프로그램 서버 Azure SignalR Service를 사용 하 여 5 서버 연결을 만듭니다. 앱 서버는 기본적으로 Azure SignalR Service SDK를 사용합니다. 다음 성능 테스트 결과에 서버 연결 15 (또는 더 큰 그룹에 메시지를 보내고 브로드캐스트) 증가 합니다.

다양 한 사용 사례에는 응용 프로그램 서버에 대 한 다른 요구 사항이 있습니다. **브로드캐스트** 적은 수의 앱 서버가 필요 합니다. **Echo** 또는 **연결 보내기** 많은 앱 서버가 필요 합니다.

모든 사용 사례, 기본 메시지 크기는 2,048 바이트 및 메시지 송신 간격은 1 초입니다.

### <a name="default-mode"></a>기본 모드

클라이언트, 웹 앱 서버 및 Azure SignalR Service는 기본 모드에 포함 됩니다. 모든 클라이언트는 단일 연결을 나타냅니다.

#### <a name="echo"></a>echo

먼저 Azure SignalR Service에 웹 앱을 연결합니다. 둘째, 여러 클라이언트가 액세스 토큰 및 끝점을 사용 하 여 Azure SignalR service 클라이언트를 리디렉션하는 웹 앱에 연결 합니다. 그런 다음 클라이언트는 Azure SignalR Service를 사용 하 여 WebSocket 연결을 설정합니다.

모든 클라이언트 연결을 설정 후 1 초 마다 특정 허브에 타임 스탬프를 포함 하는 메시지를 보내기 시작 합니다. 허브 메시지는 원래 클라이언트를 다시 에코합니다. 모든 클라이언트 다시 에코 메시지를 받을 때 대기 시간을 계산 합니다.

다음 다이어그램에 5-8 (빨간색 강조 표시 된 트래픽) 루프에서. 루프의 기본 기간 (5 분)을 실행 하 고 모든 메시지 대기 시간 통계를 가져옵니다.

![Echo 사용 사례에 대 한 트래픽](./media/signalr-concept-performance/echo.png)

동작은 **echo** 최대 인바운드 대역폭 최대 아웃 바운드 대역폭 같은지 확인 합니다. 자세한 내용은 다음 표를 참조 합니다.

|       echo                        | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|-----------------------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결                       | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 인바운드/아웃 바운드 메시지 수 / 초 | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 인바운드/아웃 바운드 대역폭 | 2MBps   | 4MBps   | 10MBps  | 20mbps   | 40 MBps   | 100mbps  | 200mbps   |

이 사용 사례에서 모든 클라이언트 응용 프로그램 서버에 정의 된 허브를 호출 합니다. 허브 원래 클라이언트 쪽에 정의 된 메서드를 호출 합니다. 이 허브는에 대 한 가장 간단한 허브 **echo**합니다.

```
        public void Echo(IDictionary<string, object> data)
        {
            Clients.Client(Context.ConnectionId).SendAsync("RecordLatency", data);
        }
```

이 간단한 허브에 대 한도 트래픽을 앱 서버의 압력이으로 유명한 합니다 **echo** 인바운드 메시지 부하 증가 합니다. 이 트래픽을 압력 큰 SKU 계층에 대 한 많은 앱 서버가 필요합니다. 다음 표에서 모든 계층에 대 한 앱 서버 수를 나열합니다.


|    echo          | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결      | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 앱 서버 수 | 2     | 2     | 2     | 3      | 3      | 10     | 20      |

> [!NOTE]
> 클라이언트 연결 수, 메시지 크기, 메시지 전송 속도, SKU 계층 및 앱 서버의 CPU/메모리의 전반적인 성능 영향을 미칠 **echo**합니다.

#### <a name="broadcast"></a>브로드캐스트

에 대 한 **브로드캐스트**웹 앱에는 메시지를 수신 하는 경우 모든 클라이언트에 전파 합니다. 더 많은 클라이언트에 있는 모든 클라이언트는 자세한 메시지 트래픽을 브로드캐스트용 되도록 합니다. 다음 다이어그램을 참조 하세요.

![브로드캐스트 사용 사례에 대 한 트래픽](./media/signalr-concept-performance/broadcast.png)

클라이언트의 수가 적은 브로드캐스트 됩니다. 인바운드 메시지 대역폭 크지 않지만 아웃 바운드 대역폭은 막대 합니다. 클라이언트 연결으로 아웃 바운드 메시지 대역폭 증가 또는 브로드캐스트 속도가 증가 합니다.

다음 표에서 최대 클라이언트 연결, 인바운드/아웃 바운드 메시지 개수 및 대역폭입니다.

|     브로드캐스트             | Unit1 | Unit2 | Unit5  | Unit10 | Unit20 | Unit50  | Unit100 |
|---------------------------|-------|-------|--------|--------|--------|---------|---------|
| 연결               | 1,000 | 2,000 | 5,000  | 10000 | 20,000 | 50,000  | 100,000 |
| 인바운드 메시지 수 / 초  | 2     | 2     | 2      | 2      | 2      | 2       | 2       |
| 아웃 바운드 메시지 수 / 초 | 2,000 | 4,000 | 10000 | 20,000 | 40,000 | 100,000 | 200,000 |
| 인바운드 대역폭  | 4 kBps   | 4 kBps   | 4 kBps    | 4 kBps    | 4 kBps    | 4 kBps     | 4 kBps     |
| 아웃 바운드 대역폭 | 4MBps   | 8MBps   | 20mbps   | 40 MBps   | 80 MBps   | 200mbps   | 400 MBps   |

메시지를 게시 하는 브로드캐스트 클라이언트는 4 개를 초과 하지 않습니다. 와 비교 하는 앱 서버 수도 더 적은 필요할 **echo** 인바운드 메시지 크기는 작으므로 합니다. 두 앱 서버는 SLA 및 성능 고려 사항에 적합 합니다. 하지만 특히 한 Unit50 Unit100 불균형의 경우를 방지 하려면 기본 서버 연결을 늘려야 합니다.

|   브로드캐스트      | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결      | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 앱 서버 수 | 2     | 2     | 2     | 2      | 2      | 2      | 2       |

> [!NOTE]
> Azure SignalR Service에 대 한 가능한 불균형된 서버 연결을 방지 하려면 모든 응용 프로그램 서버에서 40 5에서 기본 서버 연결을 늘립니다.
>
> 클라이언트 연결 수, 메시지 크기, 메시지 송신 율 및 SKU 계층의 전반적인 성능에 영향을 줍니다 **브로드캐스트**합니다.

#### <a name="send-to-group"></a>그룹에 송신

합니다 **그룹에 송신** 사용 사례에 트래픽 패턴과 비슷합니다 **브로드캐스트**합니다. 차이점은 연결 하는 Azure SignalR Service를 사용 하 여 WebSocket 연결을 설정 하는 클라이언트, 후 해야 그룹 특정 그룹에 메시지를 보낼 수 있습니다. 다음 다이어그램은 트래픽 흐름을 보여 줍니다.

![그룹에 송신 사용 사례에 대 한 트래픽](./media/signalr-concept-performance/sendtogroup.png)

그룹 구성원 그룹 수와 성능에 영향을 주는 두 가지 요소입니다. 분석을 단순화 하기 위해 두 종류의 그룹이 정의 합니다.

- **소규모 그룹**: 모든 그룹에 10 개의 연결 합니다. 그룹 수입니다 (최대 연결 수) / 10입니다. 예를 들어 Unit1, 1,000 연결 수 없으면 다음 했습니다 1000 / 10 = 100 그룹입니다.

- **큰 그룹**: 그룹 번호는 항상 10입니다. 그룹 멤버 수 (최대 연결 수)는 / 10입니다. 예를 들어 Unit1, 1,000 연결 수 없으면 다음 모든 그룹에 1000 / 10 = 100 명의 멤버입니다.

**그룹에 송신** 라우팅 분산된 데이터 구조를 통해 대상 연결을 찾을 수 있기 때문에 Azure SignalR Service에 비용을 제공 합니다. 전송 연결을 늘리려면 비용이 증가 합니다.

##### <a name="small-group"></a>소규모 그룹

라우팅 비용은 여러 작은 그룹에 메시지를 보내기 위해 중요 합니다. 현재 Azure SignalR Service 구현 Unit50에서 라우팅 비용 제한에 도달 합니다. 더 많은 CPU와 메모리를 추가 하는 데 도움이, Unit100 개선할 수 있도록 디자인 하 여 추가 하지 않습니다. 인바운드 대역폭, 필요한 경우 고객 지원에 문의 합니다.

|   소규모 그룹 보내기     | Unit1 | Unit2 | Unit5  | Unit10 | Unit20 | Unit50 | Unit100 |
|---------------------------|-------|-------|--------|--------|--------|--------|---------|
| 연결               | 1,000 | 2,000 | 5,000  | 10000 | 20,000 | 50,000 | 100,000
| 그룹 구성원 수        | 10    | 10    | 10     | 10     | 10     | 10     | 10 
| 그룹 수               | 100   | 200   | 500    | 1,000  | 2,000  | 5,000  | 10000 
| 인바운드 메시지 수 / 초  | 200   | 400   | 1,000  | 2,500  | 4,000  | 7,000  | 7,000   |
| 인바운드 대역폭  | 400kbps  | 800 kBps  | 2MBps     | 5MBps     | 8MBps     | 14 MBps    | 14 MBps     |
| 아웃 바운드 메시지 수 / 초 | 2,000 | 4,000 | 10000 | 25,000 | 40,000 | 70,000 | 70,000  |
| 아웃 바운드 대역폭 | 4MBps    | 8MBps    | 20mbps    | 50mbps     | 80 MBps    | 140 MBps   | 140 MBps    |

많은 클라이언트 연결 앱 서버 수 성능에 대 한 중요 한도 이므로 허브를 호출 하는 합니다. 다음 표에서 제안 된 앱 서버 수를 나열합니다.

|  소규모 그룹 보내기   | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결      | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 앱 서버 수 | 2     | 2     | 2     | 3      | 3      | 10     | 20      |

> [!NOTE]
> 클라이언트 연결 수, 메시지 크기, 메시지 전송 속도, 라우팅 비용, SKU 계층 및 앱 서버의 CPU/메모리의 전반적인 성능 영향을 미칠 **소규모 그룹 보내기**합니다.

##### <a name="big-group"></a>큰 그룹

에 대 한 **큰 그룹에 송신**, 아웃 바운드 대역폭 제한을 비용 라우팅에 도달 하기 전에 병목 상태가 발생 합니다. 다음 표에서 최대 아웃 바운드 대역폭에 대 한 것 **브로드캐스트**합니다.

|    큰 그룹 보내기      | Unit1 | Unit2 | Unit5  | Unit10 | Unit20 | Unit50  | Unit100 |
|---------------------------|-------|-------|--------|--------|--------|---------|---------|
| 연결               | 1,000 | 2,000 | 5,000  | 10000 | 20,000 | 50,000  | 100,000
| 그룹 구성원 수        | 100   | 200   | 500    | 1,000  | 2,000  | 5,000   | 10000 
| 그룹 수               | 10    | 10    | 10     | 10     | 10     | 10      | 10
| 인바운드 메시지 수 / 초  | 20    | 20    | 20     | 20     | 20     | 20      | 20      |
| 인바운드 대역폭  | 80 kBps   | 40 kBps   | 40 kBps    | 20kbps    | 40 kBps    | 40 kBps     | 40 kBps     |
| 아웃 바운드 메시지 수 / 초 | 2,000 | 4,000 | 10000 | 20,000 | 40,000 | 100,000 | 200,000 |
| 아웃 바운드 대역폭 | 8MBps    | 8MBps    | 20mbps    | 40 MBps    | 80 MBps    | 200mbps    | 400 MBps    |

전송 연결 수는 40 개 이하의 합니다. 앱 서버에 부담 작은 이므로 웹 앱의 제안 된 수가 작습니다.

|  큰 그룹 보내기  | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결      | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 앱 서버 수 | 2     | 2     | 2     | 2      | 2      | 2      | 2       |

> [!NOTE]
> Azure SignalR Service에 대 한 가능한 불균형된 서버 연결을 방지 하려면 모든 응용 프로그램 서버에서 40 5에서 기본 서버 연결을 늘립니다.
> 
> 클라이언트 연결 수, 메시지 크기, 메시지 송신 율, 라우팅 비용 및 SKU 계층의 전반적인 성능에 영향을 줍니다 **큰 그룹에 송신**합니다.

#### <a name="send-to-connection"></a>연결에 보내기

에 **연결에 보내는** 고유한 연결 ID를 가져옵니다. 특수 한 허브를 호출 하는 클라이언트는 Azure SignalR Service를 모든 클라이언트에 대 한 연결을 설정 하는 경우 사용 사례 성능 벤치 마크를 섞 습니다 하며 모든 클라이언트에 보내는 대상으로 재할당 모든 연결 Id를 수집 합니다. 클라이언트 성능 테스트를 완료 될 때까지 대상 연결에 메시지를 보내기 유지 합니다.

![송신-클라이언트 간 사용 사례에 대 한 트래픽](./media/signalr-concept-performance/sendtoclient.png)

에 대 한 비용 라우팅을 **연결 보내기** 비용 비슷합니다 **작은 그룹으로 보낼**합니다.

연결 수 증가 하면 라우팅 비용 전반적인 성능을 제한 합니다. Unit50 제한에 도달 했습니다. 결과적으로, Unit100 추가로 개선할 수 없습니다.

다음 표에서 여러 차례의 실행 한 후 통계 요약을를는 **연결 보내기** 벤치 마크입니다.

|   연결에 보내기   | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50          | Unit100         |
|------------------------------------|-------|-------|-------|--------|--------|-----------------|-----------------|
| 연결                        | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000          | 100,000         |
| 인바운드/아웃 바운드 메시지 수 / 초 | 1,000 | 2,000 | 5,000 | 8,000  | 9,000  | 20,000 | 20,000 |
| 인바운드/아웃 바운드 대역폭 | 2MBps    | 4MBps    | 10MBps   | 16 MBps    | 18 MBps    | 40 MBps       | 40 MBps       |

이 사용 사례 앱 서버 쪽에서 높은 로드를 해야합니다. 제안 된 앱 서버를 참조 하세요. 다음 테이블의 수입니다.

|  연결에 보내기  | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결      | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 앱 서버 수 | 2     | 2     | 2     | 3      | 3      | 10     | 20      |

> [!NOTE]
> 클라이언트 연결 수, 메시지 크기, 메시지 속도, 라우팅 비용, SKU 계층 및 p U/메모리를 앱 서버에 대 한 전송 전반적인 성능 영향을 미칠 **연결에 보내는**합니다.

#### <a name="aspnet-signalr-echo-broadcast-and-send-to-small-group"></a>ASP.NET SignalR echo, 브로드캐스트 및 작은 그룹에 송신

Azure SignalR Service는 ASP.NET SignalR에 대 한 동일한 성능 용량을 제공합니다. 

Azure Web Apps를 사용 하는 성능 테스트 [표준 서비스 계획 S3](https://azure.microsoft.com/pricing/details/app-service/windows/) ASP.NET SignalR에 대 한 합니다.

다음 표에서 ASP.NET SignalR에 대 한 제안 된 웹 앱 수가 제공 **echo**합니다.

|   echo           | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결      | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 앱 서버 수 | 2     | 2     | 4     | 4      | 8      | 32      | 40       |

다음 표에서 ASP.NET SignalR에 대 한 제안 된 웹 앱 수가 제공 **브로드캐스트**합니다.

|  브로드캐스트       | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결      | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 앱 서버 수 | 2     | 2     | 2     | 2      | 2      | 2      | 2       |

다음 표에서 ASP.NET SignalR에 대 한 제안 된 웹 앱 수가 제공 **소규모 그룹 보내기**합니다.

|  소규모 그룹 보내기     | Unit1 | Unit2 | Unit5 | Unit10 | Unit20 | Unit50 | Unit100 |
|------------------|-------|-------|-------|--------|--------|--------|---------|
| 연결      | 1,000 | 2,000 | 5,000 | 10000 | 20,000 | 50,000 | 100,000 |
| 앱 서버 수 | 2     | 2     | 4     | 4      | 8      | 32      | 40       |

### <a name="serverless-mode"></a>서버 리스 모드

클라이언트 및 Azure SignalR Service는 서버 리스 모드로 포함 됩니다. 모든 클라이언트는 단일 연결을 나타냅니다. 클라이언트는 모든 다른 클라이언트 또는 브로드캐스트 메시지를 REST API를 통해 메시지를 보냅니다.

REST API를 통해 고밀도 메시지를 보내는 WebSocket을 사용 하 여 만큼 효율적이 지 않습니다. 새 HTTP 연결 될 때마다 작성 해야 하며 서버 리스 모드에 추가 됩니다.

#### <a name="broadcast-through-rest-api"></a>REST API를 통해 브로드캐스트
모든 클라이언트는 Azure SignalR Service를 사용 하 여 WebSocket 연결을 설정합니다. 다음 일부 클라이언트는 REST API를 통해 브로드캐스트를 시작 합니다. 지원 되지 않는 효율적인 WebSocket 비교할 HTTP Post (인바운드)을 보내는 메시지가입니다.

|   REST API를 통해 브로드캐스트     | Unit1 | Unit2 | Unit5  | Unit10 | Unit20 | Unit50  | Unit100 |
|---------------------------|-------|-------|--------|--------|--------|---------|---------|
| 연결               | 1,000 | 2,000 | 5,000  | 10000 | 20,000 | 50,000  | 100,000 |
| 인바운드 메시지 수 / 초  | 2     | 2     | 2      | 2      | 2      | 2       | 2       |
| 아웃 바운드 메시지 수 / 초 | 2,000 | 4,000 | 10000 | 20,000 | 40,000 | 100,000 | 200,000 |
| 인바운드 대역폭  | 4 kBps    | 4 kBps    | 4 kBps     | 4 kBps     | 4 kBps     | 4 kBps      | 4 kBps      |
| 아웃 바운드 대역폭 | 4MBps    | 8MBps    | 20mbps    | 40 MBps    | 80 MBps    | 200mbps    | 400 MBps    |

#### <a name="send-to-user-through-rest-api"></a>REST API를 통해 사용자에 게 보내기
벤치 마크는 Azure SignalR Service에 연결을 시작 하기 전에 모든 클라이언트에 사용자를 할당 합니다. Azure SignalR Service를 사용 하 여 WebSocket 연결을 설정 하는 클라이언트, HTTP Post를 통해 다른 사용자에 게 메시지를 보내기 시작 합니다.

|   REST API를 통해 사용자에 게 보내기 | Unit1 | Unit2 | Unit5  | Unit10 | Unit20 | Unit50  | Unit100 |
|---------------------------|-------|-------|--------|--------|--------|---------|---------|
| 연결               | 1,000 | 2,000 | 5,000  | 10000 | 20,000 | 50,000  | 100,000 |
| 인바운드 메시지 수 / 초  | 300   | 600   | 900    | 1,300  | 2,000  | 10000  | 18,000  |
| 아웃 바운드 메시지 수 / 초 | 300   | 600   | 900    | 1,300  | 2,000  | 10000  | 18,000 |
| 인바운드 대역폭  | 600 전송  | 1.2 MBps  | 1.8 MBps   | 2.6 MBps   | 4MBps     | 10MBps     | 36 MBps    |
| 아웃 바운드 대역폭 | 600 전송  | 1.2 MBps  | 1.8 MBps   | 2.6 MBps   | 4MBps     | 10MBps     | 36 MBps    |

## <a name="performance-test-environments"></a>성능 테스트 환경

모든 사용 사례 앞에 나열 된, Azure 환경에서 성능 테스트를 수행 했습니다. 최대 50 개의 클라이언트 Vm 및 20 앱 서버 Vm 사용 했습니다. 몇 가지 세부 정보는 다음과 같습니다.

- 클라이언트 VM 크기: StandardDS2V2 (2 vCPU, 7 G 메모리)

- 앱 서버 VM 크기: StandardF4sV2 (4 vCPU, 8g 메모리)

- Azure SignalR SDK 서버 연결: 15

## <a name="performance-tools"></a>성능 도구

Azure SignalR Service 용 성능 도구를 찾을 수 있습니다 [GitHub](https://github.com/Azure/azure-signalr-bench/tree/master/SignalRServiceBenchmarkPlugin)합니다.

## <a name="next-steps"></a>다음 단계

이 문서에서는 일반적인 사용 사례 시나리오에서는 Azure SignalR Service 성능 개요를 가져왔습니다.

서비스에 대 한 크기 조정의 내부 세부 정보를 가져오려면 다음 가이드를 읽기:

* [Azure SignalR Service 내부 기능](signalr-concept-internals.md)
* [Azure SignalR Service 크기 조정](signalr-howto-scale-multi-instances.md)
