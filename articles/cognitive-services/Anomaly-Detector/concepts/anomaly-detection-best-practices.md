---
title: Anomaly Detector API를 사용하는 경우 모범 사례
titleSuffix: Azure Cognitive Services
description: 비정상 탐지기 API를 사용 하 여 변칙을 검색 하는 경우 모범 사례에 알아봅니다.
services: cognitive-services
author: aahill
manager: nitinme
ms.service: cognitive-services
ms.subservice: anomaly-detector
ms.topic: conceptual
ms.date: 03/26/2019
ms.author: aahi
ms.openlocfilehash: 9407f2fc9375765efb6eb9688b3ebfeef24ba90a
ms.sourcegitcommit: dad277fbcfe0ed532b555298c9d6bc01fcaa94e2
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/10/2019
ms.locfileid: "67721631"
---
# <a name="best-practices-for-using-the-anomaly-detector-api"></a>비정상 탐지기 API를 사용 하 여에 대 한 모범 사례

비정상 탐지기 API는 상태 비저장 변칙 검색 서비스. 그 결과의 성능과 정확도 영향을 받을 수 있습니다.

* 어떻게 시계열 데이터 준비 됩니다.
* 사용 된 비정상 탐지기 API 매개 변수입니다.
* API 요청에 대 한 데이터 요소의 수입니다. 

이 문서를 사용 하 여 최상의 결과 얻는 데이터에 대 한 API를 사용 하 여에 대 한 모범 사례를 알아봅니다. 

## <a name="when-to-use-batch-entire-or-latest-last-point-anomaly-detection"></a>일괄 처리 (전체) 또는 최신 버전을 사용 하는 경우 (마지막) 변칙 검색 지점

비정상 탐지기 API 일괄 처리 검색 엔드포인트 전체 시간 시계열 데이터를 통해 문제를 검색할 수 있습니다. 이 검색 모드에서는 단일 통계 모델 생성 되어 데이터 집합의 각 요소에 적용 합니다. 시계열에 있으면는 특성을 아래 일괄 검색을 사용 하 여 단일 API 호출에서 데이터를 미리 보려면 권장 합니다.

* 가끔 잘못 된 부분을 사용 하 여 계절성 시계열입니다.
* 플랫 추세 시계열 간헐적 급증/급락을 사용 하 여 합니다. 

모니터링 또는 사용 하 여 특성 위에 없는 시계열 데이터에서 실시간 데이터에 대 한 일괄 처리 변칙 검색을 사용 하 여 없는 것이 좋습니다. 

* 일괄 검색을 만들고 모델 하나만 적용, 각 지점에 대 한 검색 전체 시리즈의 컨텍스트에서 수행 됩니다. 계절성, 일부 지점 없이 위아래로 시간 시계열 데이터 추세 (dip 및 급격히 증가 하는 데이터)를 변경 하는 경우 모델에서 누락 될 수 있습니다. 마찬가지로, 데이터 집합의 뒷부분에 나오는 것 보다 덜 중요 한 일부 변경 지점 모델을 통합할 수 있을 만큼 중요 한 항목으로 계산 되지 않습니다 수 있습니다.

* 일괄 처리 검색 분석 중인 지점의 수 때문에 실시간 데이터 모니터링을 수행할 때 최신 지점의 비정상 상태를 검색 하는 보다 느립니다.

실시간 데이터 모니터링에 대 한 최신 데이터 요소만의 비정상 상태를 검색 하는 것이 좋습니다. 최신 지점 검색을 지속적으로 적용 하면 데이터 모니터링 스트리밍 가능 보다 효율적이 고 정확 하 게 합니다.

아래 예제에서는 이러한 검색 모드 성능이 될 수 있으므로 영향을 설명 합니다. 첫 번째 그림 28에 이전에 데이터 요소에 따라 변칙 상태 최신 지점을 지속적으로 검색 결과 보여 줍니다. 빨간색 지점은 예외입니다.

![최신 지점을 사용 하 여 변칙 검색을 보여 주는 이미지](../media/last.png)

다음은 일괄 처리 변칙 검색을 사용 하 여 동일한 데이터 집합입니다. 작업에 대해 작성 된 모델 사각형으로 표시 된 몇 가지 예외를 무시 했습니다.

![일괄 처리 메서드를 사용 하 여 변칙 감지를 보여 주는 이미지](../media/entire.png)

## <a name="data-preparation"></a>데이터 준비

비정상 탐지기 API는 시계열 허용 데이터 형식이 JSON 요청 개체를 지정 합니다. 시계열에 순차적 시간 동안 기록 된 모든 숫자 데이터를 수 있습니다. 시계열 데이터의 windows API의 성능 향상을 위해 비정상 탐지기 API 엔드포인트에 보낼 수 있습니다. 보낼 수 있습니다 하는 데이터 요소의 최소 수는 12이 고 최대값은 8640 지점입니다. [세분성](https://docs.microsoft.com/dotnet/api/microsoft.azure.cognitiveservices.anomalydetector.models.granularity?view=azure-dotnet-preview) 데이터에서 샘플링 되는 속도로 정의 됩니다. 

비정상 탐지기 API로 전송 하는 데이터 요소는 숫자 값을 유효한 utc (협정 세계시) 타임 스탬프 있어야 합니다. 

```json
{
    "granularity": "daily",
    "series": [
      {
        "timestamp": "2018-03-01T00:00:00Z",
        "value": 32858923
      },
      {
        "timestamp": "2018-03-02T00:00:00Z",
        "value": 29615278
      },
    ]
}
```

비표준 시간 간격으로 데이터를 샘플링 하는 경우 추가 하 여 지정할 수 있습니다는 `customInterval` 요청에는 특성입니다. 예를 들어 계열이 5 분 마다 샘플링 된 경우 다음 JSON 요청에 추가할 수 있습니다.

```json
{
    "granularity" : "minutely", 
    "customInterval" : 5
}
```

### <a name="missing-data-points"></a>누락 데이터 요소가

누락 데이터 요소가 세부적으로 시뮬레이트하도록 (작은 샘플링 간격을 사용 하 여 특히 균등 하 게 분산된 시간 시계열 데이터 집합에 공통적인입니다. 예를 들어 데이터 샘플링 몇 분 마다). 데이터에서 요소의 예상된 수의 10% 미만의 누락 된 검색 결과에 부정적인 영향을 줄이 없어야 합니다. 데이터 요소는 이전 기간, 선형 보간을 또는 이동 평균에서 대체와 같은 특징에 따라 데이터의 간격을 채우는 것이 좋습니다.

### <a name="aggregate-distributed-data"></a>분산된 된 집계 데이터

비정상 탐지기 API는 균등 하 게 분산된 시계열에 가장 적합합니다. 데이터를 무작위로 분산 하는 경우 있습니다 해야 집계 당 분, 매시간 또는 매일 같은 시간 단위로 예를 들어 있습니다.

## <a name="anomaly-detection-on-data-with-seasonal-patterns"></a>계절성 패턴을 사용 하 여 데이터에서 변칙 검색

시계열 데이터에는 계절성 패턴 (하나는 정기적으로 발생 하는)을 알고 있는 경우에 정확도 API 응답 시간을 개선할 수 있습니다. 

지정 된 `period` JSON 요청 변칙 검색 대기 시간을 최대 50%까지 줄일 수 있습니다 생성 하는 경우. `period` 은 대략 데이터 요소는 시계열을 지정 하는 정수는 패턴을 반복 합니다. 예를 들어, 하루에 하나의 데이터 지점 사용 하 여 시계열은 것이 `period` 으로 `7`, (동일한 주간 패턴)을 사용 하는 시간 당 1 포인트를 사용 하 여 시계열 고는 `period` 의 `7*24`합니다. 데이터의 패턴을 잘 모를 경우이 매개 변수를 지정할 필요가 없습니다.

최상의 결과 얻으려면 제공 4 `period`의 분량의 데이터 요소 및 항목을 추가 합니다. 예를 들어 주 단위 패턴을 사용 하 여 시간별 데이터 위에 설명 된 대로 제공 해야 요청 본문에 673 데이터 요소 (`7 * 24 * 4 + 1`).

### <a name="sampling-data-for-real-time-monitoring"></a>실시간 모니터링에 대 한 샘플링 데이터

짧은 간격 (예: 초 또는 분)으로 스트리밍 데이터를 샘플링 하는 경우 권장 되는 데이터 요소 수를 전송 비정상 탐지기 API의 최대 숫자 허용된 (8640 데이터 요소)를 초과할 수 있습니다. 안정적인 계절성 패턴을 표시 하는 데이터, 시간 등 큰 시간 간격으로 시계열 데이터의 샘플을 전송 하는 것이 좋습니다. 이러한 방식으로 데이터를 샘플링 API 응답에 크게 개선할 수 있습니다. 

## <a name="next-steps"></a>다음 단계

* [비정상 탐지기 API 란 무엇 인가요?](../overview.md)
* [빠른 시작: 비정상 탐지기 REST API를 사용 하 여 시계열 데이터에서 변칙을 검색 합니다.](../quickstarts/detect-data-anomalies-csharp.md)
