---
title: 이미지 태그 모범 사례
description: Azure container registry에 이미지를 푸시 하 고 이미지를 끌어올 때 Docker 컨테이너 이미지를 태그 지정 하 고 버전을 관리 하기 위한 모범 사례
author: stevelasker
ms.topic: article
ms.date: 07/10/2019
ms.author: stevelas
ms.openlocfilehash: b483317960409fe1fbea181706f12375606fe659
ms.sourcegitcommit: f4f626d6e92174086c530ed9bf3ccbe058639081
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/25/2019
ms.locfileid: "75445744"
---
# <a name="recommendations-for-tagging-and-versioning-container-images"></a>컨테이너 이미지 태그 지정 및 버전 관리에 대한 권장 사항

컨테이너 레지스트리에 컨테이너 이미지를 배포 하 고 배포 하는 경우 이미지 태그 지정 및 버전 관리에 대한 전략이 필요 합니다. 이 문서에서는 두 가지 방법과 컨테이너 수명 주기 동안 각각에 맞는 위치에 대해 설명 합니다.

* **안정적인 태그** -예를 들어 *mycontainerimage: 1.0*과 같은 주 버전 또는 부 버전을 나타내기 위해 다시 사용 하는 태그입니다.
* **고유 태그** - *mycontainerimage: abc123*와 같이 레지스트리에 푸시하는 각 이미지에 대한 다른 태그입니다.

## <a name="stable-tags"></a>안정적인 태그

**권장 사항**: 안정적인 태그를 사용 하 여 컨테이너 빌드에 대한 **기본 이미지** 를 유지 합니다. 이러한 태그는 계속 업데이트를 수신 하 고 프로덕션 환경에서 불일치를 발생 시킬 수 있으므로 안정적인 태그로 배포 하지 마십시오.

*안정적인 태그* 는 개발자 (또는 빌드 시스템)가 계속 해 서 특정 태그를 끌어올 수 있으며, 계속 해 서 업데이트를 받습니다. 안정성은 콘텐츠가 고정 되어 있음을 의미 하지 않습니다. 대신, 안정화는 이미지를 해당 버전의 의도에 대한 안정적인 것으로 암시 합니다. "안정적인" 상태를 유지 하기 위해 보안 패치 또는 프레임 워크 업데이트를 적용 하도록 서비스를 제공할 수 있습니다.

### <a name="example"></a>예

프레임 워크 팀은 버전 1.0을 제공 합니다. 사소한 업데이트를 포함 하 여 업데이트를 제공 한다는 것을 알고 있습니다. 지정 된 주 버전 및 부 버전에 대해 안정적인 태그를 지원 하기 위해 두 개의 안정적인 태그 집합이 있습니다.

* `:1` – 주 버전에 대한 안정적인 태그입니다. `1` "최신" 또는 "최신" 1. * 버전을 나타냅니다.
* `:1.0`-버전 1.0에 대한 안정적인 태그를 제공 하 여 개발자가 1.0 업데이트에 바인딩할 수 있도록 하 고, 릴리스 시 1.1로 롤포워드할 수 없도록 합니다.

또한 팀은 현재 주 버전에 관계 없이 안정적인 최신 태그를 가리키는 `:latest` 태그를 사용 합니다.

기본 이미지 업데이트를 사용할 수 있는 경우 또는 프레임 워크의 모든 유형에 서 안정적인 태그가 있는 이미지는 해당 버전의 최신 안정적인 릴리스를 나타내는 최신 다이제스트로 업데이트 됩니다.

이 경우 주 태그와 보조 태그는 계속 해 서 처리 됩니다. 기본 이미지 시나리오에서 이미지 소유자는 서비스 이미지를 제공할 수 있습니다.

### <a name="delete-untagged-manifests"></a>태그가 없는 매니페스트 삭제

안정적인 태그가 있는 이미지가 업데이트 되 면 이전에 태그가 지정 된 이미지에 태그가 지정 되어 분리 된 이미지가 생성 됩니다. 이전 이미지의 매니페스트와 고유 계층 데이터는 레지스트리에 남아 있습니다. 레지스트리 크기를 유지 하기 위해 안정적인 이미지 업데이트에서 발생 하는 태그가 없는 매니페스트를 주기적으로 삭제할 수 있습니다. 예를 들어 지정 된 기간 보다 오래 된 태그가 지정 된 매니페스트를 [자동으로 제거](container-registry-auto-purge.md) 하거나 태그가 지정 되지 않은 매니페스트에 대한 [보존 정책을](container-registry-retention-policy.md) 설정 합니다.

## <a name="unique-tags"></a>고유 태그

**권장 사항**: 특히 여러 노드에서 확장할 수 있는 환경에서 **배포**에 고유한 태그를 사용 합니다. 일관 된 버전의 구성 요소를 의도적으로 배포 하려는 경우가 있습니다. 컨테이너가 다시 시작 되거나 오 케 스트레이 터가 더 많은 인스턴스를 확장 하는 경우 호스트는 실수로 최신 버전을 풀 하지 않으며 다른 노드와 일치 하지 않습니다.

고유한 태깅 이란 단지 레지스트리에 푸시된 모든 이미지에 고유한 태그가 있음을 의미 합니다. 태그는 다시 사용 되지 않습니다. 다음을 포함 하 여 고유한 태그를 생성 하기 위해 수행할 수 있는 몇 가지 패턴이 있습니다.

* **날짜-시간 스탬프** -이미지가 작성 된 시기를 명확 하 게 알 수 있으므로이 방법은 매우 일반적입니다. 그러나 빌드 시스템에 다시 연결 하는 방법 동시에 완료 된 빌드를 찾아야 하나요? 어떤 표준 시간대를 사용할 수 있나요? 모든 빌드 시스템이 UTC로 보정 되나요?
* **Git 커밋** –이 방법은 기본 이미지 업데이트 지원을 시작할 때까지 작동 합니다. 기본 이미지 업데이트가 발생 하면 이전 빌드와 동일한 Git 커밋을 사용 하 여 빌드 시스템이 시작 됩니다. 그러나 기본 이미지에는 새 콘텐츠가 있습니다. 일반적으로 Git 커밋은 *반*안정적인 태그를 제공 합니다.
* **매니페스트 다이제스트** -컨테이너 레지스트리에 푸시되는 각 컨테이너 이미지는 고유한 SHA-256 해시 또는 다이제스트로 식별 되는 매니페스트와 연결 됩니다. 고유 하지만 다이제스트는 긴 하지만 읽기 어렵고 빌드 환경에서 상관 관계가 없는 됩니다.
* **빌드 ID** -이 옵션은 증분 가능성이 있으므로이 옵션을 사용 하는 것이 가장 좋을 수 있으며, 모든 아티팩트와 로그를 찾기 위해 특정 빌드와 다시 연관 시킬 수 있습니다. 그러나 매니페스트 다이제스트와 마찬가지로 사람이 읽기 어려울 수 있습니다.

  조직에 여러 빌드 시스템이 있는 경우, 빌드 시스템 이름으로 태그를 접두사로 사용 하는 것은이 옵션의 변형 `<build-system>-<build-id>`입니다. 예를 들어 API 팀의 Jenkins 빌드 시스템과 웹 팀의 Azure Pipelines 빌드 시스템의 빌드를 구분할 수 있습니다.

### <a name="lock-deployed-image-tags"></a>배포 된 이미지 태그 잠금

모범 사례로, `write-enabled` 특성을 `false`로 설정 하 여 배포 된 이미지 태그를 [잠그는](container-registry-image-lock.md) 것이 좋습니다. 이 방법을 통해 레지스트리에서 이미지를 실수로 제거 하 여 배포를 방해할 수 있습니다. 릴리스 파이프라인에 잠금 단계를 포함할 수 있습니다.

배포 된 이미지를 잠그면 레지스트리를 유지 관리 하기 위해 Azure Container Registry 기능을 사용 하 여 레지스트리에서 배포 되지 않은 다른 이미지를 제거할 수 있습니다. 예를 들어 지정 된 기간 보다 오래 된 태그가 지정 되지 않은 매니페스트 또는 잠금 해제 된 이미지를 [자동으로 제거](container-registry-auto-purge.md) 하거나 태그가 지정 되지 않은 매니페스트에 대한 [보존 정책을](container-registry-retention-policy.md) 설정 합니다.

## <a name="next-steps"></a>다음 단계

이 문서의 개념에 대한 자세한 내용은 [Docker 태깅 블로그 게시물 docker 이미지 태그 지정 및 버전 관리에 대한 모범 사례](https://stevelasker.blog/2018/03/01/docker-tagging-best-practices-for-tagging-and-versioning-docker-images/)를 참조 하세요.

Azure container registry의 성능 및 비용 효율적 사용을 최대화 하려면 [Azure Container Registry에 대한 모범 사례](container-registry-best-practices.md)를 참조 하세요.

<!-- IMAGES -->


<!-- LINKS - Internal -->

