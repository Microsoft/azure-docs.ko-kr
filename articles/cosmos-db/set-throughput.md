---
title: Azure Cosmos 컨테이너 및 데이터베이스에 대한 처리량 프로비전
description: Azure Cosmos 컨테이너 및 데이터베이스에 프로비전되는 처리량을 설정하는 방법을 알아봅니다.
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 08/12/2019
ms.openlocfilehash: 9ac22461e04b447fe34d5647eb5ec7847d25a09d
ms.sourcegitcommit: a10074461cf112a00fec7e14ba700435173cd3ef
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/12/2019
ms.locfileid: "73931281"
---
# <a name="provision-throughput-on-containers-and-databases"></a>컨테이너 및 데이터베이스에 대한 처리량 프로비전

Azure Cosmos 데이터베이스는 컨테이너 세트의 관리 단위입니다. 데이터베이스는 스키마 제약 없는 컨테이너의 집합으로 구성됩니다. Azure Cosmos 컨테이너는 처리량과 스토리지 모두에 대한 확장성 단위입니다. 컨테이너는 Azure 지역 내에 있는 머신 세트에 수평적으로 분할되고 Azure Cosmos 계정과 연결된 모든 Azure 지역에 분산됩니다.

Azure Cosmos DB를 사용 하면 다음 두 가지 세분성에서 처리량을 프로 비전 할 수 있습니다.
 
- Azure Cosmos 컨테이너
- Azure Cosmos 데이터베이스

## <a name="set-throughput-on-a-container"></a>컨테이너의 처리량 설정  

Azure Cosmos 컨테이너에서 프로 비전 된 처리량은 해당 컨테이너에 대해 단독으로 예약 되어 있습니다. 컨테이너는 항상 프로비전된 처리량을 받습니다. 컨테이너에 프로비전된 처리량은 재정적으로 SLA의 지원을 받습니다. 컨테이너에서 처리량을 구성 하는 방법을 알아보려면 [Azure Cosmos 컨테이너에서 처리량 프로 비전](how-to-provision-container-throughput.md)을 참조 하세요.

컨테이너에서 프로 비전 된 처리량을 설정 하는 것이 가장 자주 사용 되는 옵션입니다. [RUs (요청 단위](request-units.md))를 사용 하 여 처리량을 프로 비전 하 여 컨테이너에 대한 처리량 크기를 탄력적으로 수 있습니다. 

컨테이너에 대해 프로 비전 된 처리량은 실제 파티션 간에 균등 하 게 분산 되 고, 논리적 파티션을 물리적 파티션 간에 균등 하 게 분산 하는 좋은 파티션 키를 가정 합니다. 처리량도 모두 균등 하 게 분산 됩니다. 컨테이너의 논리 파티션입니다. 논리적 파티션의 처리량은 선택적으로 지정할 수 없습니다. 컨테이너에 있는 하나 이상의 논리 파티션은 실제 파티션에서 호스트되므로, 실제 파티션은 컨테이너에 배타적으로 포함되고 컨테이너에서 프로비전된 처리량을 지원합니다. 

논리 파티션에서 실행 되는 워크 로드가 해당 논리 파티션에 할당 된 처리량을 초과 하는 경우에는 작업의 속도가 제한 됩니다. 속도 제한이 발생 하면 전체 컨테이너에 대해 프로 비전 된 처리량을 늘리거나 작업을 다시 시도할 수 있습니다. 분할에 대한 자세한 내용은 [논리 파티션](partition-data.md)을 참조하세요.

컨테이너 성능을 보장하려는 경우 컨테이너 세분성에서 처리량을 구성하는 것이 좋습니다.

다음 이미지는 실제 파티션이 컨테이너의 논리 파티션을 하나 이상 호스트하는 방법을 보여줍니다.

![실제 파티션](./media/set-throughput/resource-partition.png)

## <a name="set-throughput-on-a-database"></a>데이터베이스의 처리량 설정

Azure Cosmos 데이터베이스에서 처리량을 프로 비전 할 때 처리량은 데이터베이스의 모든 컨테이너 (공유 데이터베이스 컨테이너 라고 함)에서 공유 됩니다. 데이터베이스의 특정 컨테이너에 프로 비전 된 처리량을 지정 하는 경우는 예외입니다. 데이터베이스 수준 프로 비전 된 처리량을 해당 컨테이너 간에 공유 하는 것은 컴퓨터 클러스터에서 데이터베이스를 호스트 하는 것과 유사 합니다. 데이터베이스 내의 모든 컨테이너가 머신에 제공되는 리소스를 공유하므로 당연히 특정 컨테이너에 대한 예상 성능이 제공되지 않습니다. 데이터베이스에서 프로 비전 된 처리량을 구성 하는 방법을 알아보려면 [Azure Cosmos 데이터베이스에서 프로 비전 된 처리량 구성](how-to-provision-database-throughput.md)을 참조 하세요.

Azure Cosmos 데이터베이스에서 처리량을 설정 하면 항상 해당 데이터베이스에 대해 프로 비전 된 처리량을 받게 됩니다. 데이터베이스 내 모든 컨테이너가 프로비전된 처리량을 공유하므로, Azure Cosmos DB는 해당 데이터베이스의 특정 컨테이너에 대해 예측 가능한 처리량을 보장하지 않습니다. 특정 컨테이너가 받을 수 있는 처리량은 다음 조건에 따라 다릅니다.

* 컨테이너 수
* 다양한 컨테이너에 대해 선택한 파티션 키
* 컨테이너의 다양한 논리 파티션에 분산되는 워크로드 

특정 컨테이너의 전용 처리량으로 지정하지 않고 여러 컨테이너 간에 처리량을 공유하려는 경우 데이터베이스의 처리량을 구성하는 것이 좋습니다. 

다음 예제에서는 데이터베이스 수준에서 처리량을 프로비전하는 것이 좋은 경우를 보여 줍니다.

* 데이터베이스에 프로비전된 처리량을 컨테이너 집합 간에 공유하는 방법은 다중 테넌트 애플리케이션에 유용합니다. 각 사용자를 고유한 Azure Cosmos 컨테이너로 나타낼 수 있습니다.

* 데이터베이스에 프로비전된 처리량을 컨테이너 세트 간에 공유하는 방법은 VM 클러스터에 호스트된 MongoDB, Cassandra 등의 NoSQL 데이터베이스를 마이그레이션하거나 온-프레미스 물리적 서버에서 Azure Cosmos DB로 마이그레이션하는 경우에 유용합니다. Azure Cosmos 데이터베이스에 구성된 프로비전된 처리량은 MongoDB 또는 Cassandra 클러스터의 컴퓨팅 용량과 논리적으로 상응하지만 더 비용 효과적이고 탄력적인 것으로 생각하면 됩니다.  

프로 비전 된 처리량을 가진 데이터베이스 내에 생성 된 모든 컨테이너는 [파티션 키](partition-data.md)로 만들어야 합니다. 지정 된 시점에서 데이터베이스 내의 컨테이너에 할당 된 처리량은 해당 컨테이너의 모든 논리적 파티션에 분산 됩니다. 데이터베이스에 구성 된 프로 비전 된 처리량을 공유 하는 컨테이너가 있는 경우 특정 컨테이너 또는 논리적 파티션에 처리량을 선택적으로 적용할 수 없습니다. 

논리 파티션의 워크로드가 특정 논리 파티션에 할당된 처리량보다 많은 양을 사용하는 경우 작업 속도가 제한됩니다. 속도 제한이 발생 하면 전체 데이터베이스에 대한 처리량을 늘리거나 작업을 다시 시도할 수 있습니다. 분할에 대한 자세한 내용은 [논리 파티션](partition-data.md)을 참조하세요.

데이터베이스에 프로 비전 된 처리량은 해당 데이터베이스 내의 컨테이너에서 공유할 수 있습니다. 데이터베이스 수준 공유 처리량의 새로운 각 컨테이너에는 100 r u/s가 필요 합니다. 공유 데이터베이스 제공으로 컨테이너를 프로 비전 할 때:

* 모든 25 개의 컨테이너는 파티션 집합으로 그룹화 되 고 데이터베이스 처리량 (D)은 파티션 집합의 컨테이너 간에 공유 됩니다. 데이터베이스에 최대 25 개의 컨테이너가 있고 모든 시점에서 한 개의 컨테이너를 사용 하는 경우 해당 컨테이너는 최대 ' 처리량 '의 처리량을 사용할 수 있습니다.

* 25 개 컨테이너 이후에 만들어진 모든 새 컨테이너에 대해 새 파티션 집합이 만들어지고 데이터베이스 처리량이 생성 된 새 파티션 집합 간에 분할 됩니다 (2 개 파티션 집합의 경우 D/2, 3 파티션 집합의 경우 D/3). 언제 든 지 데이터베이스에서 하나의 컨테이너를 사용 하는 경우 최대 (D/2, D/3, D/4 ...)를 사용할 수 있습니다. 처리량). 축소 된 처리량을 고려 하 여 한 데이터베이스에 25 개 미만의 컨테이너를 만드는 것이 좋습니다.

**예제**

* 프로 비전 된 처리량이 10K/s 인 "MyDB" 라는 데이터베이스를 만듭니다.

* "MyDB" 아래에 25 개의 컨테이너를 프로 비전 하는 경우 모든 컨테이너가 파티션 집합으로 그룹화 됩니다. 데이터베이스에서 하나의 컨테이너만 사용 하는 경우 언제 든 지 최대 10K r u/초 (D)를 사용할 수 있습니다.

* 26 일 container를 프로 비전 할 때 새 파티션 집합이 만들어지고 처리량은 두 파티션 집합 간에 균등 하 게 분할 됩니다. 따라서 언제 든 지 데이터베이스에서 하나의 컨테이너를 사용 하는 경우 최대 5K r u/s (D/2)를 사용할 수 있습니다. 파티션 집합이 두 개 있으므로 처리량 shareability 요인은 D/2로 분할 됩니다.

   다음 그림은 이전 예제를 그래픽으로 보여 줍니다.

   ![데이터베이스 수준 처리량의 shareability 요소](./media/set-throughput/database-level-throughput-shareability-factor.png)


작업에 데이터베이스의 모든 컬렉션을 삭제 하 고 다시 만드는 작업이 포함 된 경우에는 컬렉션을 만들기 전에 빈 데이터베이스를 삭제 하 고 새 데이터베이스를 다시 만드는 것이 좋습니다. 다음 이미지는 데이터베이스 내 여러 컨테이너에 속하는 하나 이상의 논리 파티션을 실제 파티션에 호스트할 수 있다는 것을 보여줍니다.

![실제 파티션](./media/set-throughput/resource-partition2.png)

## <a name="set-throughput-on-a-database-and-a-container"></a>데이터베이스 및 컨테이너의 처리량 설정

두 모델을 결합할 수 있습니다. 데이터베이스와 컨테이너의 처리량을 둘 다 프로비전할 수 있습니다. 다음 예제는 Azure Cosmos 데이터베이스 및 컨테이너의 처리량을 프로비전하는 방법을 보여줍니다.

* 프로 비전 된 처리량이 *"K"* 인 *Z* 인 Azure Cosmos 데이터베이스를 만들 수 있습니다. 
* 그런 다음 데이터베이스 내에서 *A*, *B*, *C*, *D*및 *E* 라는 5 개의 컨테이너를 만듭니다. 컨테이너 B를 만들 때 **이 컨테이너의 전용 처리량 프로 비전** 을 사용 하도록 설정 하 고이 컨테이너에서 프로 비전 된 처리량의 *"P"* RUs를 명시적으로 구성 해야 합니다. 데이터베이스 및 컨테이너를 만들 때만 공유 및 전용 처리량을 구성할 수 있습니다. 

   ![컨테이너 수준에서 처리량 설정](./media/set-throughput/coll-level-throughput.png)

* *"K"* RUs 처리량은 4 개의 컨테이너 *A*, *C*, *D*및 *E*에서 공유 됩니다. , *C*, *D*또는 *E* 에 사용할 *수 있는 정확한*처리량은 다양 합니다. 각 개별 컨테이너의 처리량에 대한 SLA는 없습니다.
* *B* 라는 컨테이너는 항상 *"P"* RUs 처리량을 가져옵니다. SLA가 지원됩니다.

> [!NOTE]
> 프로 비전 된 처리량을 가진 컨테이너는 공유 데이터베이스 컨테이너로 변환할 수 없습니다. 반대로 공유 데이터베이스 컨테이너는 전용 처리량을 갖도록 변환할 수 없습니다.

## <a name="update-throughput-on-a-database-or-a-container"></a>데이터베이스 또는 컨테이너의 업데이트 처리량

Azure Cosmos 컨테이너 또는 데이터베이스를 만든 후 프로 비전 된 처리량을 업데이트할 수 있습니다. 데이터베이스 또는 컨테이너에 대해 구성할 수 있는 최대 프로 비전 된 처리량에는 제한이 없습니다. 프로 비전 된 최소 처리량은 다음 요소에 따라 달라 집니다. 

* 컨테이너에 저장 하는 최대 데이터 크기
* 컨테이너에서 프로 비전 하는 최대 처리량
* 공유 처리량이 있는 데이터베이스에서 만든 Azure Cosmos 컨테이너의 최대 수입니다. 

Sdk를 사용 하 여 프로그래밍 방식으로 컨테이너 또는 데이터베이스의 최소 처리량을 검색 하거나 Azure Portal의 값을 확인할 수 있습니다. .NET SDK를 사용 하는 경우 [ReplaceOfferAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.documents.client.documentclient.replaceofferasync?view=azure-dotnet) 메서드를 사용 하 여 프로 비전 된 처리량 값의 크기를 조정할 수 있습니다. Java SDK를 사용 하는 경우 [Requestoptions. setOfferThroughput](sql-api-java-samples.md#offer-examples) 메서드를 사용 하 여 프로 비전 된 처리량 값의 크기를 조정할 수 있습니다. 

.NET SDK를 사용 하는 경우 [ReadOfferAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.documents.client.documentclient.readofferasync?view=azure-dotnet) 메서드를 사용 하 여 컨테이너 또는 데이터베이스의 최소 처리량을 검색할 수 있습니다. 

언제 든 지 컨테이너 또는 데이터베이스의 프로 비전 된 처리량을 확장할 수 있습니다. 처리량을 늘리기 위해 크기 조정 작업을 수행 하는 경우 필요한 리소스를 프로 비전 하는 시스템 작업 때문에 시간이 더 오래 걸릴 수 있습니다. Azure Portal에서 또는 Sdk를 사용 하 여 프로그래밍 방식으로 크기 조정 작업의 상태를 확인할 수 있습니다. .Net SDK를 사용 하는 경우 `DocumentClient.ReadOfferAsync` 메서드를 사용 하 여 크기 조정 작업의 상태를 가져올 수 있습니다.

## <a name="comparison-of-models"></a>모델 비교

|**매개 변수**  |**데이터베이스에 프로비전된 처리량**  |**컨테이너에 프로비전된 처리량**|
|---------|---------|---------|
|최소 RU |400(처음 네 개의 컨테이너 후 각 추가 컨테이너에는 초당 최소 100RU가 필요합니다.) |400|
|컨테이너당 최소 RU|100|400|
|최대 RU|데이터베이스에서 무제한|컨테이너에서 무제한|
|특정 컨테이너에 할당 또는 제공되는 RU|보장되지 않습니다. 지정된 컨테이너에 할당되는 RU는 속성에 따라 다릅니다. 속성은 처리량, 워크로드 분산 및 컨테이너 수를 공유하는 컨테이너 파티션 키의 선택 항목일 수 있습니다. |컨테이너에 구성된 모든 RU는 컨테이너에만 배타적으로 예약됩니다.|
|컨테이너의 최대 스토리지|무제한.|무제한.|
|컨테이너의 논리 파티션당 최대 처리량|10K RU|10K RU|
|컨테이너의 논리 파티션당 최대 스토리지(데이터 + 인덱스)|10 GB|10 GB|

## <a name="next-steps"></a>다음 단계

* [논리 파티션](partition-data.md)에 대해 자세히 알아봅니다.
* [Azure Cosmos 컨테이너의 처리량을 프로비전](how-to-provision-container-throughput.md)하는 방법을 알아봅니다.
* [Azure Cosmos 데이터베이스의 처리량을 프로비전](how-to-provision-database-throughput.md)하는 방법을 알아봅니다.

