---
title: Azure IoT Hub에 대한 디바이스 구성 모범 사례 | Microsoft Docs
description: 대규모 IoT 디바이스 구성에 대한 모범 사례에 대해 알아보기
author: chrisgre
ms.author: chrisgre
ms.date: 06/24/2018
ms.topic: conceptual
ms.service: iot-hub
services: iot-hub
ms.openlocfilehash: c97395981ea3af90c7b0c590cb049fccc7392304
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/23/2019
ms.locfileid: "60734833"
---
# <a name="best-practices-for-device-configuration-within-an-iot-solution"></a>IoT 솔루션 내에서 디바이스 구성에 대한 모범 사례

Azure IoT Hub에서 자동 디바이스 관리는 전체 수명 주기를 통해 대규모 디바이스를 관리하는 반복적이고 복잡한 작업을 자동화합니다. 이 문서는 IoT 솔루션을 개발 및 운영하는 데 수반되는 다양한 역할에 대한 다양한 모범 사례를 정의합니다.

* **IoT 하드웨어 제조업체/통합 업체:** 다양 한 제조업체 또는 IoT 배포용 하드웨어를 제공 하는 공급 업체에서 하드웨어를 조립 하는 통합 업체는 IoT 하드웨어 제조업체에 의해 제조 되거나 통합 다른 공급 업체입니다. 펌웨어의 개발 및 통합, 포함된 운영 체제 및 포함된 소프트웨어에 관련됩니다.

* **IoT 솔루션 개발자:** IoT 솔루션의 개발은 일반적으로 솔루션 개발자가 수행 됩니다. 이 개발자는 이러한 활동에 특화된 사내 팀 또는 시스템 통합업체에 속할 수 있습니다. IoT 솔루션 개발자는 다양한 IoT 솔루션 구성 요소를 처음부터 새로 개발하거나, 다양한 표준 또는 오픈 소스 구성 요소를 통합하거나, [IoT 솔루션 가속기](/azure/iot-accelerators/)를 사용자 지정할 수 있습니다.

* **IoT 솔루션 운영자:** IoT 솔루션을 배포한 후에 장기적인 운영, 모니터링, 업그레이드 및 유지 관리 해야 합니다. 이러한 작업은 정보 기술 전문가, 하드웨어 운영 및 유지 관리 팀, 전체 IoT 인프라의 올바른 동작을 모니터링하는 도메인 전문가로 구성된 사내 팀이 수행합니다.

## <a name="understand-automatic-device-management-for-configuring-iot-devices-at-scale"></a>대규모 IoT 디바이스 구성에 대한 자동 디바이스 관리 이해

자동 디바이스 관리는 클라우드 및 디바이스 간의 desired 및 reported 상태를 동기화하도록 [디바이스 쌍](iot-hub-devguide-device-twins.md) 및 [모듈 쌍](iot-hub-devguide-module-twins.md)의 다양한 혜택을 포함합니다. [자동 장치 구성을](iot-hub-auto-device-config.md) 자동으로 대량의 쌍 집합을 업데이트 하 고 진행률 및 규정 준수를 요약 합니다. 다음 고급 단계에서는 자동 디바이스 관리가 개발되고 사용되는 방법을 설명합니다.

* **IoT 하드웨어 제조업체/통합업체**는 [장치 쌍](iot-hub-devguide-device-twins.md)을 사용하여 포함된 애플리케이션 내에서 장치 관리 기능을 구현합니다. 이러한 기능은 펌웨어 업데이트, 소프트웨어 설치 및 업데이트, 설정 관리를 포함할 수 있습니다.

* **IoT 솔루션 개발자**는 [디바이스 쌍](iot-hub-devguide-device-twins.md) 및 [자동 디바이스 구성](iot-hub-auto-device-config.md)을 사용하여 디바이스 관리 작업의 관리 계층을 구현합니다. 솔루션은 디바이스 관리 작업을 수행하는 운영자 인터페이스 정의를 포함해야 합니다.

* **IoT 솔루션 운영자**는 IoT 솔루션을 사용하여 디바이스 관리 작업을 수행합니다. 특히 디바이스를 함께 그룹화하고, 펌웨어 업데이트와 같은 구성 변경 내용을 시작하고, 진행률을 모니터링하고, 발생하는 문제를 해결합니다.

## <a name="iot-hardware-manufacturerintegrator"></a>IoT 하드웨어 제조업체/통합업체

다음은 포함된 소프트웨어 개발을 다루는 하드웨어 제조업체 및 통합업체에 대한 모범 사례입니다.

* **구현 [장치 쌍](iot-hub-devguide-device-twins.md):** 장치 쌍에는 현재 구성 및 장치 속성을 보고 하 고 클라우드에서 동기화 원하는 구성을 사용 하도록 설정 합니다. 포함된 애플리케이션 내에서 장치 쌍을 구현하는 가장 좋은 방법은 [Azure IoT SDK](https://github.com/Azure/azure-iot-sdks)를 통하는 것입니다. 디바이스 쌍은 다음과 같은 이유로 구성에 가장 적합합니다.

    * 양방향 통신을 지원합니다.
    * 연결된 디바이스 상태 및 연결이 끊긴 디바이스 상태를 모두 허용합니다.
    * 결과적 일관성의 원칙을 따릅니다.
    * 클라우드에서 완전히 쿼리 가능합니다.

* **장치 관리에 대 한 장치 쌍을 구성 합니다.** 장치 쌍은 장치 관리 속성은 논리적으로 섹션으로 그룹화 되도록 구성 되어야 합니다. 이렇게 하면 쌍의 다른 섹션에 영향을 주지 않고 격리되도록 구성 변경 내용을 활성화합니다. 예를 들어 펌웨어에 대한 desired 속성 내에서 하나의 섹션, 소프트웨어에 대한 다른 섹션 및 네트워크 설정에 대한 세 번째 섹션을 만듭니다. 

* **장치 관리를 위한 유용한 보고서 장치 특성:** 물리적 장치와 같은 특성 제조사 및 모델, 펌웨어, 운영 체제, 일련 번호, 있으며 보고 및 구성 변경 내용을 대상에 대 한 매개 변수로 다른 식별자 유용 합니다.

* **상태 및 진행률 보고에 대 한 기본 상태를 정의 합니다.** 운영자에 게 보고 될 수 있도록 최상위 상태를 열거 해야 합니다. 예를 들어 펌웨어 업데이트는 Current, Downloading, Applying, In Progress 및 Error로 상태를 보고합니다. 각 상태의 자세한 내용에 대한 추가 필드를 정의합니다.

## <a name="iot-solution-developer"></a>IoT 솔루션 개발자

다음은 Azure에 기반을 둔 시스템을 빌드하는 IoT 솔루션 개발자에 대한 모범 사례입니다.

* **구현 [장치 쌍](iot-hub-devguide-device-twins.md):** 장치 쌍에는 현재 구성 및 장치 속성을 보고 하 고 클라우드에서 동기화 원하는 구성을 사용 하도록 설정 합니다. 클라우드 솔루션 애플리케이션 내에서 장치 쌍을 구현하는 가장 좋은 방법은 [Azure IoT SDKs](https://github.com/Azure/azure-iot-sdks)를 사용하는 것입니다. 디바이스 쌍은 다음과 같은 이유로 구성에 가장 적합합니다.

    * 양방향 통신을 지원합니다.
    * 연결된 디바이스 상태 및 연결이 끊긴 디바이스 상태를 모두 허용합니다.
    * 결과적 일관성의 원칙을 따릅니다.
    * 클라우드에서 완전히 쿼리 가능합니다.

* **장치 쌍 태그를 사용 하 여 장치를 구성 합니다.** 솔루션 품질 링 또는 카나리아와 같은 다양 한 배포 전략에 따라 장치의 다른 집합을 정의 하는 연산자를 허용 해야 합니다. 디바이스 조직은 디바이스 쌍 태그 및 [쿼리](iot-hub-devguide-query-language.md)를 사용하여 솔루션 내에서 구현될 수 있습니다. 구성을 안전하고 정확하게 배포하도록 허용하는 데 디바이스 조직이 필요합니다.

* **구현 [자동 장치 구성을](iot-hub-auto-device-config.md):** 자동 장치 구성을 배포 하 고 대량의 장치 쌍을 통해 IoT 장치 모니터 구성을 변경 합니다. 자동 디바이스 구성은 디바이스 쌍 태그 또는 reported 속성에서 쿼리인 **대상 조건**을 통해 디바이스 쌍의 집합을 대상으로 합니다. **대상 콘텐츠**는 대상 디바이스 쌍 내에서 설정될 desired 속성의 집합입니다. 대상 콘텐츠는 IoT 하드웨어 제조업체/통합업체에 의해 정의된 디바이스 쌍 구조에 맞춰야 합니다.

   **메트릭**은 디바이스 쌍 reported 속성의 쿼리이며, IoT 하드웨어 제조업체/통합업체에 의해 정의된 디바이스 쌍 구조에 맞춰야 합니다. 자동 디바이스 구성에는 디바이스 쌍 읽기 및 업데이트에 대한 [제한 한도](iot-hub-devguide-quotas-throttling.md)를 절대 초과하지 않는 비율에서 디바이스 쌍 작업을 수행하는 IoT Hub의 혜택도 있습니다.

* **사용 된 [Device Provisioning Service](../iot-dps/how-to-manage-enrollments.md):** 에 의해 자동으로 구성 됩니다 있도록 솔루션 개발자가 새 장치에 장치 쌍 태그를 할당할 Device Provisioning Service를 사용 해야 **자동 장치 구성을** 는 대상 해당 태그를 사용 하 여 쌍으로 합니다. 

## <a name="iot-solution-operator"></a>IoT 솔루션 운영자

다음은 Azure에서 빌드한 IoT 솔루션을 사용하는 IoT 솔루션 운영자에 대한 모범 사례입니다.

* **관리를 위해 장치를 구성 합니다.** IoT 솔루션을 정의 하거나 품질 링 만들기 또는 카나리아와 같은 다양 한 배포 전략에 따라 장치의 다른 집합을 허용 해야 합니다. 디바이스 집합은 구성 변경 내용을 배포하고 기타 대규모 디바이스 관리 작업을 수행하는 데 사용됩니다.

* **구성 변경 내용을 시행을 사용 하 여 수행 합니다.**  시행은 전반적인 프로세스 운영자가 대규모 IoT 장치 집합에 변경 내용을 배포 하는 가능해 집니다. 목표는 점진적으로 변경하여 광범위한 새로운 변경에 따른 위험을 줄이는 것입니다.  운영자는 솔루션의 인터페이스를 사용하여 [자동 디바이스 구성](iot-hub-auto-device-config.md)을 만들어야 하며, 대상 조건은 디바이스의 초기 집합을 대상으로 해야 합니다(예: 카나리아 그룹). 그런 다음, 운영자는 디바이스의 초기 집합에서 구성 변경 내용의 유효성을 검사해야 합니다.

   유효성 검사가 완료되면 운영자는 더 큰 디바이스 집합을 포함하도록 자동 디바이스 구성을 업데이트합니다. 운영자는 현재 해당 디바이스를 대상으로 하는 다른 구성보다 높게 구성에 대한 우선 순위를 설정해야 합니다. 자동 디바이스 구성에서 보고되는 메트릭을 사용하여 배포를 모니터링할 수 있습니다.

* **오류 또는 구성 오류 발생 시 롤백 수행 합니다.**  오류 또는 구성 오류를 발생 시키는 자동 장치 구성을 변경 하 여 다시 롤백할 수는 **대상 조건과** 장치는 더 이상 대상 조건을 충족 되도록 합니다. 낮은 우선 순위의 다른 자동 디바이스 구성이 여전히 해당 디바이스를 대상으로 하는지 확인합니다. 메트릭을 확인 하 여 롤백이 성공 했는지 확인 합니다. 롤백된 구성 무차별된 장치에 대 한 상태를 더 이상 표시 해야 하 고 두 번째 구성의 메트릭도 대상으로 하는 장치에 대 한 개수 이제 포함 됩니다.

## <a name="next-steps"></a>다음 단계

* [IoT Hub에서 디바이스 쌍 이해 및 사용](iot-hub-devguide-device-twins.md)에서 디바이스 쌍 구현에 대해 알아봅니다.

* [대규모 IoT 디바이스 구성 및 모니터링](iot-hub-auto-device-config.md)에서 자동 디바이스 구성을 만들고, 업데이트 또는 삭제하는 단계를 살펴봅니다.

* 장치 쌍 및 자동 장치 구성에서 사용 하 여 펌웨어 업데이트 패턴을 구현 [자습서: 장치 펌웨어 업데이트 프로세스 구현](tutorial-firmware-update.md)합니다.
