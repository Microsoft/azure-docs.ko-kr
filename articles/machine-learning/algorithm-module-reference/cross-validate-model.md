---
title: '모델 교차 유효성 검사: 모듈 참조'
titleSuffix: Azure Machine Learning
description: Azure Machine Learning의 모델 교차 유효성 검사 모듈을 사용 하 여 데이터를 분할 하 여 분류 또는 회귀 모델에 대 한 매개 변수 예상치를 교차 유효성 검사 하는 방법에 대해 알아봅니다.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/11/2020
ms.openlocfilehash: 6dd8246d5751609e2f20ee9d5e519529752940f7
ms.sourcegitcommit: b95983c3735233d2163ef2a81d19a67376bfaf15
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/11/2020
ms.locfileid: "77137521"
---
# <a name="cross-validate-model"></a>모델 교차 유효성 검사

이 문서에서는 Azure Machine Learning 디자이너 (미리 보기)의 모델 교차 유효성 검사 모듈을 사용 하는 방법을 설명 합니다. *교차 유효성 검사* 는 데이터 집합의 산포도와 해당 데이터를 통해 학습 된 모델의 안정성을 모두 평가 하기 위해 기계 학습에서 자주 사용 되는 기술입니다.  

모델 교차 유효성 검사 모듈은 학습 되지 않은 분류 또는 회귀 모델과 함께 레이블이 지정 된 데이터 집합을 입력으로 사용 합니다. 데이터 집합을 일부 하위 집합 (*접기*)으로 나누고 각 접기에 대 한 모델을 작성 한 다음 각 접기에 대 한 정확도 통계 집합을 반환 합니다. 모든 접기에 대 한 정확도 통계를 비교 하 여 데이터 집합의 품질을 해석할 수 있습니다. 그런 다음 모델이 데이터의 변형에 취약 한지 여부를 파악할 수 있습니다.  

또한 교차 유효성 검사 모델은 예측의 안정성을 평가할 수 있도록 데이터 집합에 대 한 예측 결과 및 확률을 반환 합니다.  

### <a name="how-cross-validation-works"></a>교차 유효성 검사 작동 방법

1. 교차 유효성 검사는 학습 데이터를 무작위로 접기로 나눕니다. 

   이전에 데이터 집합을 분할하지 않은 경우 이 알고리즘은 기본적으로 10개의 접기가 됩니다. 데이터 집합을 다른 접기 수로 나누려면 [파티션 및 샘플](partition-and-sample.md) 모듈을 사용 하 고 사용할 접기 수를 지정할 수 있습니다.  

2.  모듈은 유효성 검사에 사용할 데이터를 접기 1로 따로 설정 합니다. ( *홀드 아웃 접기*라고도 합니다.) 모듈은 나머지 접기를 사용 하 여 모델을 학습 합니다. 

    예를 들어 5 개의 접기를 만들면 모듈은 교차 유효성 검사 중에 5 개의 모델을 생성 합니다. 이 모듈은 데이터의 4 fifths를 사용 하 여 각 모델을 학습 합니다. 나머지 1 ~ 5 번째 모델에서 각 모델을 테스트 합니다.  

3.  각 접기에 대해 모델을 테스트 하는 동안 모듈은 여러 정확도 통계를 평가 합니다. 모듈에서 사용 하는 통계는 평가 중인 모델 유형에 따라 달라 집니다. 분류 모델 및 회귀 모델을 평가 하는 데는 다른 통계가 사용 됩니다.  

4.  모든 접기에 대해 빌드 및 평가 프로세스가 완료 되 면 모델 교차 유효성 검사는 모든 데이터에 대해 성능 메트릭 집합과 점수가 매겨진 결과를 생성 합니다. 이러한 메트릭을 검토 하 여 단일 접기의 정확도가 높은 지 또는 낮은 지 확인 합니다. 

### <a name="advantages-of-cross-validation"></a>교차 유효성 검사의 이점

모델을 평가 하는 서로 다른 일반적인 방법은 [분할 데이터](split-data.md)를 사용 하 여 데이터를 학습 및 테스트 집합으로 나누고 학습 데이터에 대해 모델의 유효성을 검사 하는 것입니다. 그러나 교차 유효성 검사는 다음과 같은 몇 가지 이점을 제공 합니다.  

-   교차 유효성 검사에서는 더 많은 테스트 데이터를 사용 합니다.

    교차 유효성 검사는 더 큰 데이터 공간에서 지정 된 매개 변수를 사용 하 여 모델의 성능을 측정 합니다. 즉, 교차 유효성 검사는 학습 및 평가에 대 한 부분 대신 전체 학습 데이터 집합을 사용 합니다. 반대로 임의 분할에서 생성 된 데이터를 사용 하 여 모델의 유효성을 검사 하는 경우 일반적으로 사용 가능한 데이터의 30%에 해당 하는 모델을 평가 합니다.  

    그러나 교차 유효성 검사는 더 큰 데이터 집합에서 모델을 여러 번 학습 하 고 유효성을 검사 하기 때문에 훨씬 더 많은 계산을 많이 수행 합니다. 임의 분할의 유효성을 검사 하는 것 보다 훨씬 더 시간이 걸립니다.  

-   교차 유효성 검사는 데이터 집합과 모델을 모두 계산 합니다.

    교차 유효성 검사는 단순히 모델의 정확도를 측정 하지 않습니다. 또한 데이터 집합의 개념 및 데이터의 변동에 대 한 모델의 차이에 대해 간략하게 설명 합니다.  

## <a name="how-to-use-cross-validate-model"></a>모델 교차 유효성 검사를 사용 하는 방법

데이터 집합이 클 경우 교차 유효성 검사를 실행 하는 데 시간이 오래 걸릴 수 있습니다.  따라서 모델을 작성 하 고 테스트 하는 초기 단계에서 교차 유효성 검사 모델을 사용할 수 있습니다. 이 단계에서 모델 매개 변수의 적합을 평가할 수 있습니다 (계산 시간이 지속할 인 것으로 가정). 그런 다음 모델 [학습](train-model.md) 및 [모델 평가](evaluate-model.md) 모듈을 사용 하 여 설정 된 매개 변수를 사용 하 여 모델을 학습 하 고 평가할 수 있습니다.

이 시나리오에서는 모델 교차 유효성 검사를 사용 하 여 모델을 학습 하 고 테스트 합니다.

1. 파이프라인에 모델 교차 유효성 검사 모듈을 추가 합니다. **모델 점수 매기기 & 평가** 범주의 Azure Machine Learning 디자이너에서 찾을 수 있습니다. 

2. 분류 또는 회귀 모델의 출력을 연결 합니다. 

    예를 들어 분류를 위해 **두 개의 승격 된 의사 결정 트리** 를 사용 하는 경우 원하는 매개 변수를 사용 하 여 모델을 구성 합니다. 그런 다음 분류자의 학습 되지 않은 **모델** 포트에서 교차 유효성 검사 모델의 일치 하는 포트로 연결선을 끕니다. 

    > [!TIP] 
    > 모델 교차 유효성 검사는 평가의 일환으로 모델을 자동으로 학습 하므로 모델을 학습할 필요가 없습니다.  
3.  교차 유효성 검사 모델의 **데이터 집합** 포트에서 레이블이 지정 된 학습 데이터 집합을 연결 합니다.  

4.  교차 유효성 검사 모델의 오른쪽 패널에서 **열 편집**을 클릭 합니다. 클래스 레이블이 포함 된 단일 열 또는 예측 가능한 값을 선택 합니다. 

5. 동일한 데이터에서 연속 실행에 대 한 교차 유효성 검사의 결과를 반복 하려면 **임의 초기값** 매개 변수 값을 설정 합니다.  

6. 파이프라인을 실행합니다.

7. 보고서에 대 한 설명은 [결과](#results) 섹션을 참조 하십시오.

## <a name="results"></a>결과

모든 반복이 완료 된 후 모델 교차 유효성 검사에서는 전체 데이터 집합에 대 한 점수를 만듭니다. 또한 모델의 품질을 평가 하는 데 사용할 수 있는 성능 메트릭을 만듭니다.

### <a name="scored-results"></a>점수가 매겨진 결과

모듈의 첫 번째 출력은 각 행에 대 한 원본 데이터와 함께 예측 된 값 및 관련 확률을 제공 합니다. 

파이프라인에서 결과를 보려면 모델 교차 유효성 검사 모듈을 마우스 오른쪽 단추로 클릭 합니다. **점수가 매겨진 결과 시각화**를 선택 합니다.

| 새 열 이름      | 설명                              |
| -------------------- | ---------------------------------------- |
| 점수가 매겨진 레이블        | 이 열은 데이터 집합의 끝에 추가 됩니다. 각 행에 대 한 예측 값을 포함 합니다. |
| 점수가 매겨진 확률 | 이 열은 데이터 집합의 끝에 추가 됩니다. **점수가 매겨진 레이블의**값에 대 한 예상 확률을 나타냅니다. |
| 접기 번호          | 교차 유효성 검사를 수행 하는 동안 각 데이터 행이 할당 된 접기의 인덱스 (0부터 시작)를 나타냅니다. |

 ### <a name="evaluation-results"></a>평가 결과

두 번째 보고서는 접기로 그룹화 됩니다. 실행 하는 동안 교차 유효성 검사 모델은 학습 데이터를 *n* 접기 (기본적으로 10)로 임의로 분할 합니다. 데이터 집합에 대 한 각 반복에서 교차 유효성 검사 모델은 하나의 접기를 유효성 검사 데이터 집합으로 사용 합니다. 나머지 *n-1* 접기를 사용 하 여 모델을 학습 합니다. 각각의 *n 개* 모델은 다른 모든 접기의 데이터에 대해 테스트 됩니다.

이 보고서에서 접기는 인덱스 값으로 오름차순으로 나열 됩니다.  다른 열을 정렬 하려면 데이터 집합으로 결과를 저장할 수 있습니다.

파이프라인에서 결과를 보려면 모델 교차 유효성 검사 모듈을 마우스 오른쪽 단추로 클릭 합니다. **접기 별 평가 결과 시각화를**선택 합니다.


|열 이름| 설명|
|----|----|
|접기 번호| 각 접기에 대 한 식별자입니다. 5 개의 접기를 만든 경우에는 0에서 4 사이의 5 개의 데이터 하위 집합이 있습니다.
|접기의 예제 수|각 접기에 할당 된 행 수입니다. 거의 같아야 합니다. |


이 모듈에는 평가 중인 모델 유형에 따라 각 접기에 대해 다음과 같은 메트릭이 포함 됩니다. 

+ **분류 모델**: 전체 자릿수, 회수, F-점수, cc, 정확도  

+ **회귀 모델**: 절대 평균 오차, 제곱 평균 오차, 상대 절대 오차, 상대 제곱 오차 및 결정 계수


## <a name="technical-notes"></a>기술 정보  

+ 교차 유효성 검사에 사용 하기 전에 데이터 집합을 정규화 하는 것이 좋습니다. 

+ 모델 교차 유효성 검사는 훨씬 더 많은 계산을 수행 하 고 무작위로 분할 된 데이터 집합을 사용 하 여 모델의 유효성을 검사 한 경우 보다 더 오래 걸립니다. 그 이유는 교차 유효성 검사 모델이 모델을 여러 번 학습 하 고 유효성을 검사 하는 것입니다.

+ 교차 유효성 검사를 사용 하 여 모델의 정확도를 측정할 때 학습 및 테스트 집합으로 데이터 집합을 분할할 필요가 없습니다. 


## <a name="next-steps"></a>다음 단계

Azure Machine Learning [사용할 수 있는 모듈 집합](module-reference.md) 을 참조 하세요. 

