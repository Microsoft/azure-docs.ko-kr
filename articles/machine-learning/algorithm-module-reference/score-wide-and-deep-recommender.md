---
title: 전체 점수 & Deep 추천 모듈 사용
titleSuffix: Azure Machine Learning
description: Azure Machine Learning에서 점수 Wide & Deep 추천 모듈을 사용 하 여 데이터 집합에 대 한 추천 예측 점수를 매기는 방법에 대해 알아봅니다.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 08/12/2020
ms.openlocfilehash: 43dca9cd9f9000faae701e618e9a5fdf21d31ee3
ms.sourcegitcommit: 9ce0350a74a3d32f4a9459b414616ca1401b415a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/13/2020
ms.locfileid: "88192741"
---
# <a name="score-wide-and-deep-recommender"></a>와이드 및 딥 추천 점수 매기기

이 문서에서는 Azure Machine Learning designer (미리 보기)의 wide **wide And Deep 추천** 모듈을 사용 하 여 Google에서 제공 하는 광범위 한 & 심층 학습을 기반으로 학습 된 추천 모델을 기반으로 예측을 만드는 방법을 설명 합니다.

Wide and Deep 추천는 다음과 같은 두 가지 종류의 예측을 생성할 수 있습니다.

- [지정된 사용자와 항목의 등급 예측](#predict-ratings)

- [지정된 사용자에게 항목 추천](#recommend-items)


후자 종류의 예측을 만들 때 *프로덕션 모드* 또는 *평가 모드*에서 작업할 수 있습니다.

- **프로덕션 모드** 는 모든 사용자 또는 항목을 고려 하며 일반적으로 웹 서비스에서 사용 됩니다. 학습 중에 표시 되는 사용자 뿐만 아니라 새 사용자에 대 한 점수를 만들 수 있습니다. 

- **평가 모드** 는 평가할 수 있는 축소 된 사용자 또는 항목 집합에 대해 작동 하며 일반적으로 실험 중에 사용 됩니다.

Wide and Deep 추천 및 해당 기본 이론에 대 한 자세한 내용은 관련 리서치 백서에서 찾을 수 있습니다.  [추천 시스템에 대 한 넓은 & 심층 학습](https://arxiv.org/pdf/1606.07792.pdf).  

## <a name="how-to-configure-score-wide-and-deep-recommender"></a>전체 점수 및 딥 추천 점수를 구성 하는 방법

이 모듈은 각기 다른 요구 사항을 사용 하는 다양 한 유형의 권장 사항을 지원 합니다. 사용자가 보유 한 데이터 형식 및 만들려는 권장 사항의 유형에 대 한 링크를 클릭 합니다.

+ [예측 등급](#predict-ratings)
+ [항목 권장](#recommend-items)

### <a name="predict-ratings"></a>예측 등급

등급을 예측할 때 모델은 지정 된 사용자가 학습 데이터를 사용 하 여 특정 항목에 반응 하는 방법을 계산 합니다. 따라서 점수 매기기를 위한 입력 데이터는 평가할 사용자와 항목을 모두 제공 해야 합니다.

1. 실험에 학습 된 넓은 & 심층 권장 모델을 추가 하 고 **학습 된 광범위 하 고 심층 추천 모델**에 연결 합니다.  [학습 폭 및 딥 추천](train-wide-and-deep-recommender.md)를 사용 하 여 모델을 만들어야 합니다.

2. **추천 예측 종류**: **등급 예측**을 선택 합니다. 추가 매개 변수는 필요하지 않습니다.

3. 예측을 만들 데이터를 추가 하 고 **점수를**매길 데이터 집합에 연결 합니다.

    등급을 예측 하려면 입력 데이터 집합에 사용자-항목 쌍이 포함 되어야 합니다.

    데이터 집합에는 첫 번째 및 두 번째 열에 있는 사용자-항목 쌍의 선택적인 세 번째 열이 포함 될 수 있지만 예측 중에 세 번째 열은 무시 됩니다.

4.  (선택 사항). 사용자 기능의 데이터 집합이 있는 경우 **사용자 기능**에 연결 합니다.

    사용자 기능의 데이터 집합은 첫 번째 열에 사용자 id를 포함 해야 합니다. 나머지 열은 성별, 기본 설정, 위치 등 사용자의 특징을 지정 하는 값을 포함 해야 합니다.
  
    학습 데이터 집합에서 항목의 등급을 지정한 사용자의 기능은 학습 중에 이미 학습 되었으므로 **점수 Wide 및 Deep 추천**에서 무시 됩니다. 따라서 *콜드 시작 사용자*또는 항목의 등급을 지정 하지 않은 사용자만 포함 하도록 데이터 집합을 미리 필터링 합니다.

    > [!WARNING]
    > 사용자 기능을 사용 하지 않고 모델을 학습 한 경우 점수 매기기 중에 사용자 기능을 도입할 수 없습니다.

5. 항목 기능의 데이터 집합이 있으면 **항목 기능**에 연결할 수 있습니다.

    항목 기능 데이터 집합은 첫 번째 열에 항목 식별자를 포함 해야 합니다. 나머지 열에는 항목의 특징을 지정 하는 값이 포함 되어야 합니다.

    학습 데이터 집합에서 등급이 지정 된 항목의 기능은 학습 중에 이미 학습 되었으므로 **점수 와이드 및 심층 추천** 에서 무시 됩니다. 따라서 점수 매기기 데이터 집합을 *콜드 시작 항목*으로 제한 하거나 사용자가 등급을 매긴 항목으로 제한 합니다.

    > [!WARNING]
    > 항목 기능을 사용 하지 않고 모델을 학습 한 경우 점수 매기기 중에 항목 기능을 도입할 수 없습니다.

7. 실험을 실행합니다.

### <a name="results-for-rating-predictions"></a>등급 예측 결과 

출력 데이터 집합에는 사용자, 항목 및 각 입력 사용자 및 항목에 대 한 예측 등급이 포함 된 세 개의 열이 포함 되어 있습니다.

또한 점수 매기기 중에 다음 변경 내용이 적용 됩니다.

-  숫자 사용자 또는 항목 기능 열의 경우 누락 된 값이 누락 되지 않은 학습 집합 값의 **평균** 으로 자동으로 대체 됩니다. 범주 기능의 경우 누락 값은이 기능의 가능한 값 이외의 범주 값으로 바뀝니다.
-  해당 희박도를 유지 하기 위해 기능 값에는 번역이 적용 되지 않습니다.

### <a name="recommend-items"></a>항목 권장

사용자에 게 항목을 추천 하려면 사용자 및 항목 목록을 입력으로 제공 합니다. 이 데이터에서 모델은 기존 항목 및 사용자에 대 한 정보를 사용 하 여 각 사용자에 게 표시 가능한 것으로 예상 되는 항목의 목록을 생성 합니다. 반환 되는 권장 구성 수를 사용자 지정 하 고 권장 구성을 생성 하기 위해 필요한 이전 권장 구성 수에 대 한 임계값을 설정할 수 있습니다.

1. 실험에 학습 된 넓은 권장 사항 모델을 추가 하 고이를 학습 된 **광범위 하 고 심층 추천 모델**에 연결 합니다.  [학습 폭 및 딥 추천](train-wide-and-deep-recommender.md)를 사용 하 여 모델을 만들어야 합니다.

2. 지정 된 사용자 목록에 대 한 항목을 추천 하려면 **추천 예측 종류** 를 **항목 추천**으로 설정 합니다.

3. **권장 항목 선택**: 다음 값 중 하나를 선택 하 여 프로덕션 또는 모델 평가에 점수 매기기 모듈을 사용 하는지 여부를 나타냅니다.

    - **등급을 매긴 항목 (모델 평가의 경우)**: 모델을 개발 하거나 테스트 하는 경우이 옵션을 선택 합니다. 이 옵션은 **평가 모드**를 사용 하도록 설정 하며, 모듈은 평가 된 입력 데이터 집합의 해당 항목 에서만 권장 사항을 만듭니다.
    - **모든 항목에서**: 웹 서비스 또는 프로덕션에서 사용할 실험을 설정 하는 경우이 옵션을 선택 합니다.  이 옵션은 **프로덕션 모드**를 사용 하 고 모듈은 학습 중에 표시 되는 모든 항목에서 권장 사항을 만듭니다.
    - 등급이 지정 되지 않은 **항목 (사용자에 게 새 항목 제안)에서**: 학습 데이터 집합에서 등급이 지정 되지 않은 항목에 대해서만 권장 사항을 제공 하려면이 옵션을 선택 합니다. 
4. 예측을 만들 데이터 집합을 추가 하 고 **점수를 매길 데이터 집합**에 연결 합니다.

    - **모든 항목에서**옵션을 선택 하는 경우 입력 데이터 집합은 하나의 열로만 구성 되어야 하며 권장 사항을 만들 사용자의 식별자를 포함 합니다.

        데이터 집합에는 항목 식별자 및 등급의 추가 두 열이 포함 될 수 있지만이 두 열은 무시 됩니다. 

    - **등급을 매긴 항목 (모델 평가의 경우)에서**옵션을 선택 하는 경우 입력 데이터 집합은 **사용자-항목 쌍**으로 구성 되어야 합니다. 첫 번째 열은 **사용자** id를 포함 해야 합니다. 두 번째 열에는 해당 **항목** 식별자가 포함 되어야 합니다.

        데이터 집합은 사용자 항목 등급의 세 번째 열을 포함할 수 있지만이 열은 무시 됩니다.
        
    - 등급이 지정 되지 않은 **항목 (사용자에 게 새 항목 제안)** 의 경우 입력 데이터 집합은 사용자-항목 쌍으로 구성 되어야 합니다. 첫 번째 열은 사용자 id를 포함 해야 합니다. 두 번째 열에는 해당 항목 식별자가 포함 되어야 합니다.

        데이터 집합은 사용자 항목 등급의 세 번째 열을 포함할 수 있지만이 열은 무시 됩니다.

5. (선택 사항). **사용자 기능의**데이터 집합이 있는 경우 **사용자 기능**에 연결 합니다.

    사용자 기능 데이터 집합의 첫 번째 열은 사용자 id를 포함 해야 합니다. 나머지 열은 성별, 기본 설정, 위치 등 사용자의 특징을 지정 하는 값을 포함 해야 합니다.

    항목의 등급을 매긴 사용자의 기능은 학습 중에 이미 학습 되었으므로 **점수 Wide 및 Deep 추천**에서 무시 됩니다. 따라서 *콜드 시작 사용자*또는 항목의 등급을 지정한 사용자만 포함 하도록 데이터 집합을 미리 필터링 할 수 있습니다.

    > [!WARNING]
    >  사용자 기능을 사용 하지 않고 모델을 학습 한 경우 점수 매기기 중에 기능 적용을 사용할 수 없습니다.

6. 필드 **항목 기능의**데이터 집합이 있으면 **항목 기능**에 연결할 수 있습니다.

    항목 기능 데이터 집합의 첫 번째 열에는 항목 식별자가 포함 되어야 합니다. 나머지 열에는 항목의 특징을 지정 하는 값이 포함 되어야 합니다.

    등급이 지정 된 항목의 기능은 학습 중에 이미 학습 되었으므로 **점수 Wide 및 Deep 추천**에서 무시 됩니다. 따라서 점수 매기기 데이터 집합을 *콜드 시작 항목*으로 제한 하거나 사용자가 등급을 매긴 항목으로 제한할 수 있습니다.

    > [!WARNING]
    >  항목 기능을 사용 하지 않고 모델을 학습 한 경우 점수를 매길 때 항목 기능을 사용 하지 마십시오.  

7. **사용자에 게 권장 되는 최대 항목 수**: 각 사용자에 대해 반환할 항목의 수를 입력 합니다. 기본적으로 5 개 항목을 권장 합니다.

8. **사용자 당 추천 풀의 최소 크기**: 필요한 이전 권장 구성 수를 나타내는 값을 입력 합니다.  기본적으로이 매개 변수는 2로 설정 됩니다. 즉, 항목을 두 개 이상의 다른 사용자가 권장 해야 합니다.

    평가 모드의 점수를 매기는 경우에만이 옵션을 사용 해야 합니다. **모든 항목** 을 선택 하거나 등급이 없는 항목에서 선택 하는 경우 **(사용자에 게 새 항목을 제안 하기 위해)** 옵션을 사용할 수 없습니다.

9. 등급이 지정 되지 않은 **항목에서 (사용자에 게 새 항목을 제안 하려면)** 세 번째 입력 포트 ( **학습 데이터**)를 사용 하 여 이미 예측 결과에서 등급이 지정 된 항목을 제거 합니다.

    이 필터를 적용 하려면 원래 학습 데이터 집합을 입력 포트에 연결 합니다.

10. 실험을 실행합니다.
### <a name="results-of-item-recommendation"></a>항목 권장 사항의 결과

**점수 Wide 및 Deep 추천** 에서 반환 된 점수가 매겨진 데이터 집합은 각 사용자에 게 권장 되는 항목을 나열 합니다.

- 첫 번째 열에는 사용자 식별자가 포함 됩니다.
- **사용자에 게 권장 되는 최대 항목 수**에 대해 설정한 값에 따라 많은 추가 열이 생성 됩니다. 각 열에는 권장 항목 (식별자 별)이 포함 됩니다. 권장 사항은 **항목 1**의 선호도가 가장 높은 항목을 포함 하는 사용자-항목 선호도를 기준으로 정렬 됩니다.

##  <a name="technical-notes"></a>기술 정보

이 섹션에서는 전체 & 심층 추천 사용에 대 한 몇 가지 일반적인 질문에 대 한 답을 포함 하 여 예측을 만듭니다.  

###  <a name="cold-start-users-and-recommendations"></a>콜드 시작 사용자 및 권장 사항

일반적으로 권장 사항을 만들려면 **전체 점수 및 딥 추천** 모듈에서 사용자 ID를 포함 하 여 모델을 학습할 때 사용한 것과 동일한 입력이 필요 합니다. 이는 학습 중에이 사용자에 대 한 정보를 알 수 있는지 알고리즘이 알고 있어야 하기 때문입니다. 

그러나 새 사용자에 게는 사용자 ID가 없고 나이, 성별 등의 일부 사용자 기능만 있을 수 있습니다.

이 경우에도 시스템의 새 사용자를 *콜드 시작 사용자*로 처리하여 해당 사용자에 대해 추천을 작성할 수 있습니다. 이러한 사용자의 경우 추천 알고리즘은 이전 기록이나 이전 등급을 사용하지 않으며 사용자 특성만 사용합니다.

예측을 위해 콜드 시작 사용자는 학습에 사용 되지 않은 ID의 사용자로 정의 됩니다. Id가 학습에 사용 된 Id와 일치 하지 않도록 하려면 새 식별자를 만들 수 있습니다. 예를 들어 지정 된 범위 내에서 임의의 Id를 생성 하거나 콜드 시작 사용자에 게 일련의 Id를 미리 할당할 수 있습니다.

그러나 사용자 특성 벡터와 같은 공동 작업 필터링 데이터가 없으면 분류 또는 회귀 학습자를 사용하는 것이 좋습니다.

###  <a name="production-use-of-the-wide-and-deep-recommender"></a>Wide and Deep 추천의 프로덕션 사용

Wide 및 Deep 추천를 사용 하 여 실험 하 고 모델을 프로덕션으로 이동 하는 경우 평가 모드 및 프로덕션 모드에서 추천를 사용할 때 다음과 같은 주요 차이점을 알고 있어야 합니다.

- 평가 모드에서는 기본적으로 테스트 집합의 *실제 정보*와 대조하여 확인할 수 있는 예측이 필요합니다. 따라서 추천을 평가할 때는 테스트 집합에서 등급이 지정된 항목만 예측해야 합니다. 이 경우 예측 가능한 값이 제한됩니다.

    그러나 모델을 실제로 운영할 때는 보통 예측 모드를 변경하여 최적의 예측 결과를 얻기 위해 가능한 모든 항목을 기준으로 추천을 수행합니다. 이러한 예측의 대부분은 해당 하는 것이 아니므로 실험을 수행 하는 동안와 동일한 방법으로 권장 구성의 정확도를 확인할 수 없습니다.

- 프로덕션에서 사용자 ID를 제공하지 않고 특성 벡터만 제공하면, 가능한 모든 사용자에 대한 모든 추천 목록이 응답으로 제공될 수 있습니다. 따라서 사용자 ID를 제공해야 합니다.

    반환되는 추천 수를 제한하려는 경우 사용자당 반환되는 최대 항목 수를 지정할 수도 있습니다. 



## <a name="next-steps"></a>다음 단계

Azure Machine Learning [사용할 수 있는 모듈 집합](module-reference.md) 을 참조 하세요. 
