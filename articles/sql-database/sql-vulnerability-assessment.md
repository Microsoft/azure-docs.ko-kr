---
title: SQL 취약성 평가
description: SQL Database에서 SQL 취약성 평가를 구성하고 평가 보고서를 해석하는 방법을 알아봅니다.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: DavidTrigano
ms.author: datrigan
ms.reviewer: vanto, carlrab
ms.date: 03/12/2019
ms.openlocfilehash: c0ceedad5e08165411657a8af79d28009851a17e
ms.sourcegitcommit: b07964632879a077b10f988aa33fa3907cbaaf0e
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/13/2020
ms.locfileid: "77190699"
---
# <a name="sql-vulnerability-assessment-service-helps-you-identify-database-vulnerabilities"></a>SQL 취약성 평가 서비스는 데이터베이스 취약성을 식별하는 데 도움이 됩니다.

SQL 취약성 평가는 잠재적인 데이터베이스 취약성을 검색, 추적 및 수정할 수 있는 서비스를 간편하게 구성합니다. 이 도구를 사용하여 데이터베이스 보안을 사전에 강화하세요.

취약성 평가는 고급 SQL 보안 기능용 통합 패키지인 [ADS(Advanced Data Security)](sql-database-advanced-data-security.md) 제품에 포함되어 있습니다. 중앙 SQL ADS 포털을 통해 취약성 평가에 액세스하고 취약성 평가 서비스를 관리할 수 있습니다.

> [!NOTE]
> 취약성 평가는 Azure SQL Database, Azure SQL Managed Instance 및 Azure SQL Data Warehouse에서 지원됩니다. 이 문서에서는 이해를 돕기 위해 모든 관리되는 데이터베이스 서비스를 지칭할 때 'SQL Database'라는 용어를 사용합니다.

## <a name="the-vulnerability-assessment-service"></a>취약성 평가 서비스

SQL VA(취약성 평가)는 보안 상태를 파악할 수 있는 서비스로, 보안 문제를 해결하고 데이터베이스 보안을 강화하기 위한 실행 가능한 단계를 포함합니다. 이 도구를 사용하여 다음과 같은 도움을 받을 수 있습니다.  

- 데이터베이스 검색 보고서가 필요한 준수 요구 사항 충족  
- 데이터 개인 정보 보호 표준 충족  
- 변경 사항을 추적하기 어려운 동적 데이터베이스 환경 모니터링  

취약성 평가는 Azure SQL Database 서비스에 기본 제공되는 검사 서비스입니다. 이 서비스는 보안 취약성을 플래그 지정하고 잘못된 구성, 과도한 권한 및 보호되지 않은 중요한 데이터와 같은 모범 사례의 편차를 강조하는 규칙의 기술 자료를 사용합니다. 규칙은 Microsoft의 모범 사례를 기반으로 하고 데이터베이스와 중요한 데이터에 가장 큰 위험을 제공하는 보안 문제에 초점을 맞춥니다. 데이터베이스 수준 문제뿐 아니라 서버 방화벽 설정 및 서버 수준 권한과 같은 서버 수준 보안 문제도 다룹니다. 또한 이러한 규칙은 규정 준수 표준을 충족하는 다양한 규정 본문의 여러 요구 사항을 나타냅니다.  

검색 결과에는 각 문제를 해결하는 실행 가능한 단계가 포함되며 해당하는 경우 사용자 지정된 재구성 스크립트가 제공됩니다. 권한 구성, 기능 구성 및 데이터베이스 설정에 대한 허용 가능한 기준을 설정하여 평가 보고서를 환경에 맞게 사용자 지정할 수 있습니다.

## <a name="implementing-vulnerability-assessment"></a>취약성 평가 구현

다음 단계를 통해 SQL Database에서 VA를 구현합니다.  

### <a name="1-run-a-scan"></a>1. 검색 실행  

Azure SQL Database 창의 보안 머리글 아래에 있는 **Advanced Data Security**로 이동하여 VA를 시작합니다. Advanced Data Security를 클릭하여 사용하도록 설정한 다음, **스토리지 선택** 또는 **취약성 평가** 카드를 클릭합니다. 그러면 전체 SQL 서버의 취약성 평가 설정 카드가 자동으로 열립니다.

먼저 서버의 모든 데이터베이스에 대한 검색 결과를 저장할 스토리지 계정을 구성합니다. 스토리지 계정에 대한 자세한 내용은 [Azure Storage 계정 정보](../storage/common/storage-create-storage-account.md)를 참조하세요. 스토리지가 구성된 후 **검색**을 클릭하여 데이터베이스에서 취약성을 검색합니다.
  
![데이터베이스 검색](./media/sql-vulnerability-assessment/pp_va_initialize.png)  

  > [!NOTE]
  > 검색 작업은 간단하며 안전합니다. 실행하는 데 몇 초 정도 소요되며 모두 읽기 전용입니다. 데이터베이스에 어떠한 변경 사항도 발생하지 않습니다.  

### <a name="2-view-the-report"></a>2. 보고서 보기

검색이 완료되면 검색 보고서가 Azure Portal에 자동으로 표시됩니다. 이 보고서는 발견된 문제 수와 각 문제의 심각도가 포함된 보안 상태 개요를 제공합니다. 결과에는 모범 사례의 문제에 대한 경고 및 보안 관련 설정(예: 데이터베이스 보안 주체/역할 및 관련 권한)의 스냅샷이 포함됩니다. 검사 보고서는 데이터베이스에서 검색된 중요한 데이터의 맵을 제공하고 [데이터 검색 및 분류](sql-database-data-discovery-and-classification.md)를 사용하여 해당 데이터를 분류할 수 있는 권장 사항을 포함합니다.

![보고서 보기](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. 결과 분석 및 문제 해결

결과를 검토하고 보고서에서 환경의 실제 보안 문제를 나타내는 결과를 확인합니다. 각 실패한 결과로 드릴다운하여 결과의 영향과 각 보안 검사가 실패한 이유를 이해합니다. 보고서에 제공된 실행 가능한 수정 정보를 사용하여 문제를 해결합니다.  

![보고서 분석](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. 기준선 설정

평가 결과를 검토할 때 특정 결과를 해당 환경에서 허용 가능한 *기준*으로 표시할 수 있습니다. 기준은 기본적으로 결과를 보고하는 방법의 사용자 지정입니다. 기준과 일치하는 결과는 후속 검색을 통과하는 것으로 간주합니다. 기준 보안 상태를 설정한 후에는 VA가 기준의 문제만 보고하므로 관련 문제에만 주의를 기울일 수 있습니다.  

![기준 설정](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. 새 검색을 실행 하 여 사용자 지정 된 추적 보고서 확인

**규칙 기준** 설정을 완료한 후 새 검색을 실행하여 사용자 지정된 보고서를 봅니다. 이제 VA는 승인된 기준 상태에서 벗어난 보안 문제만 보고합니다.

![사용자 지정 보고서 보기](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

이제 취약성 평가를 사용하여 데이터베이스가 항상 높은 수준의 보안을 유지하고 조직 정책을 충족하는지 모니터링할 수 있습니다. 준수 보고서가 필요한 경우 준수 프로세스를 이용하는 데 VA 보고서가 도움이 될 수 있습니다.  

### <a name="6-set-up-periodic-recurring-scans"></a>6. 정기적 되풀이 검색 설정

취약성 평가 설정으로 이동하여 **주기적 되풀이 검색**을 설정합니다. 그러면 일주일에 한 번씩 데이터베이스 검색을 자동으로 실행하도록 취약성 평가가 구성됩니다. 사용자가 제공한 전자 메일 주소로 검색 결과 요약이 전송됩니다.

![사용자 지정 보고서 보기](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. 평가 보고서 내보내기

**검색 결과 내보내기**를 클릭하여 검색 결과의 다운로드 가능한 Excel 보고서를 만듭니다. 이 보고서에는 실패한 모든 검사를 포함하여 평가의 요약 정보를 표시하는 요약 탭이 포함되어 있습니다. 또한 실행된 모든 검사와 각 검사에 대한 결과 정보 등 전체 검색 결과 집합이 들어 있는 **결과** 탭이 포함되어 있습니다.

### <a name="8-view-scan-history"></a>8. 검사 기록 보기

VA 창에서 **검색 기록**을 클릭하여 이전에 이 데이터베이스에서 실행된 모든 검색의 기록을 확인합니다. 자세한 검색 결과를 보려면 목록에서 특정 검색을 선택합니다.

이제 취약성 평가를 사용하여 데이터베이스가 항상 높은 수준의 보안을 유지하고 조직 정책을 충족하는지 모니터링할 수 있습니다. 준수 보고서가 필요한 경우 준수 프로세스를 이용하는 데 VA 보고서가 도움이 될 수 있습니다.

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>Azure PowerShell을 사용하여 취약성 평가 관리

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> Azure SQL Database, Azure Resource Manager PowerShell 모듈은 계속 지원하지만 모든 향후 개발은 Az.Sql 모듈에 대해 진행됩니다. 이러한 cmdlet에 대 한 자세한 내용은 [AzureRM](https://docs.microsoft.com/powershell/module/AzureRM.Sql/)를 참조 하세요. Az 모듈과 AzureRm 모듈에서 명령의 인수는 실질적으로 동일합니다.

Azure PowerShell cmdlet을 사용하여 취약성 평가를 프로그래밍 방식으로 관리할 수 있습니다. 지원되는 cmdlet은 다음과 같습니다.

- [업데이트-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting)

  데이터베이스의 취약성 평가 설정을 업데이트합니다.
- [AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting)

  데이터베이스의 취약성 평가 설정을 반환합니다.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting)

  데이터베이스의 취약성 평가 설정을 지웁니다.
- [AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  취약성 평가 규칙 기준을 설정합니다.
- [AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  지정된 규칙에 대한 취약성 평가 규칙 기준을 가져옵니다.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  취약성 평가 규칙 기준을 지웁니다. 먼저 이 cmdlet을 사용하여 선택을 취소하기 전에 기준을 설정합니다.
- [AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan)

  취약성 평가 검사 시작을 트리거합니다.
- [AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord)

   지정된 데이터베이스와 연관된 모든 취약성 평가 검사 레코드를 가져옵니다.
- [변환-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan)

  취약성 평가 검사 결과를 Excel 파일로 변환합니다.

스크립트 예제를 보려면 [Azure SQL 취약성 평가 PowerShell 지원](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/)을 참조하세요.

## <a name="manage-vulnerability-assessments-baseline-rules-using-azure-resource-manager-templates"></a>Azure Resource Manager 템플릿을 사용 하 여 취약성 평가 기준 규칙 관리

Azure Resource Manager 템플릿을 사용 하 여 취약성 평가 기준을 구성할 때 `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` 형식을 사용 해야 합니다.

기준을 추가 하기 전에 SQL Server에서 vulnerabilityAssements을 사용 하도록 설정 했는지 확인 합니다.

VA2065에서 리소스에 대 한 기본 규칙을 master 데이터베이스 및 VA1143 userdb로 정의 하는 예제를 참조 하세요.

```json
    "resources": [
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                                "FirewallRuleName3",
                                "StartIpAddress",
                                "EndIpAddress"
                                  ]
                    },{
                         "result": [
                                "FirewallRuleName4",
                                "62.92.15.68",
                                "62.92.15.68"
                            ]
                        
                    }
                ]
            },
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
            ],
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                            "dbo"
                        ]
                    }
                ]
            }
        }
    ]
}   
```

사용자 데이터베이스 및 master 데이터베이스의 경우 리소스 이름은 다음과 같이 다르게 정의 됩니다.

* Master 데이터베이스-"name": "[concat (parameters (' server_name '), '/', parameters (' database_name '), '/default/VA2065/<b>master</b>')]",
* 사용자 데이터베이스-"name": "[concat (parameters (' server_name '), '/', 매개 변수 (' database_name '), '/default/VA2065/<b>default</b>')]",
 
## <a name="next-steps"></a>다음 단계  

- [고급 데이터 보안](sql-database-advanced-data-security.md)에 대해 자세히 알아보기
- [데이터 검색 및 분류](sql-database-data-discovery-and-classification.md)에 대해 자세히 알아보기
