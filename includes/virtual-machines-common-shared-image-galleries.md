---
title: 포함 파일
description: 포함 파일
services: virtual-machines
author: axayjo
ms.service: virtual-machines
ms.topic: include
ms.date: 01/09/2018
ms.author: akjosh; cynthn
ms.custom: include file
ms.openlocfilehash: 8c7da8d04b456642b158dda77d9c745891aa18e6
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/23/2019
ms.locfileid: "60620398"
---
공유 이미지 갤러리는 사용자 지정 관리형 VM 이미지를 기준으로 구조와 조직을 구축하는 데 사용할 수 있는 서비스입니다. 공유 이미지 갤러리를 사용하면 조직 내의 여러 사용자, 서비스 주체 또는 AD 그룹에게 이미지를 공유할 수 있습니다. 배포의 크기를 더 빠르게 조정하기 위해 여러 지역에 공유 이미지를 복제할 수 있습니다.

관리되는 이미지는 이미지를 만드는 방법에 따라 전체 VM(연결된 데이터 디스크 포함) 또는 OS 디스크의 사본입니다. 이미지에서 VM을 만드는 경우 이미지의 VHD 복사본을 사용하여 새 VM의 디스크를 만듭니다. 관리되는 이미지는 저장소에 유지되며 새 VM을 만들 때 계속 반복해서 사용할 수 있습니다.

유지 관리해야 하는 관리되는 이미지가 많고 회사 전체에서 사용 가능하도록 하려면 공유 이미지 갤러리를 이미지를 쉽게 업데이트하고 공유할 수 있게 해주는 리포지토리로 사용할 수 있습니다. 공유 이미지 갤러리 사용 요금은 이미지에서 사용하는 스토리지 비용과 원본 지역에서 게시된 지역으로 이미지를 복제하기 위한 네트워크 송신 비용을 더한 것입니다.

공유 이미지 갤러리 기능에는 여러 가지 리소스가 있습니다.

| 리소스 | 설명|
|----------|------------|
| **관리되는 이미지** | 이는 단독으로 사용하거나 이미지 갤러리에 **이미지 버전**을 만드는 데 사용할 수 있는 기본 이미지입니다. 관리되는 이미지는 일반화된 VM에서 생성됩니다. 관리되는 이미지는 여러 VM을 만드는 데 사용할 수 있는 특수한 유형의 VHD로, 이제 공유 이미지 버전을 만드는 데 사용할 수 있습니다. |
| **이미지 갤러리** | Azure Marketplace와 마찬가지로 **이미지 갤러리**는 이미지를 관리하고 공유하는 데 사용되는 리포지토리이지만 액세스할 수 있는 사람을 제어할 수 있습니다. |
| **이미지 정의** | 이미지는 갤러리 내에 정의되고, 내부적으로 사용하기 위해 충족해야 할 요구 사항과 이미지에 대한 정보를 전달합니다. 여기에는 이미지가 Windows인지, Linux인지 여부, 릴리스 정보, 최소 및 최대 메모리 요구 사항이 포함됩니다. 이미지의 형식 정의입니다. |
| **이미지 버전** | **이미지 버전**은 갤러리를 사용하는 경우 VM을 만들 때 사용합니다. 사용 환경에 필요한 만큼 여러 버전의 이미지를 가질 수 있습니다. 관리되는 이미지와 마찬가지로 **이미지 버전**을 사용하여 VM을 만들 때는 이미지 버전을 사용하여 VM의 새 디스크를 만듭니다. 이미지 버전은 여러 번 사용할 수 있습니다. |

<br>


![갤러리에서 한 이미지의 여러 버전을 보유하는 방법을 보여주는 그래픽](./media/shared-image-galleries/shared-image-gallery.png)

### <a name="regional-support"></a>국가별 지원

공유 이미지 갤러리에 대한 국가별 지원은 제한된 미리 보기 상태로 제공되지만 점차 확장될 예정입니다. 제한된 미리 보기의 경우 갤러리를 만들 수 있는 지역 목록 및 모든 갤러리 이미지를 복제할 수 있는 지역 목록은 다음과 같습니다. 

| 갤러리 생성 위치  | 버전 복제 대상 |
|--------------------|----------------------|
| 미국 중서부    |모든 공용 지역 &#42;|
| 미국 동부 2          ||
| 미국 중남부   ||
| 동남아시아     ||
| 서유럽        ||
| 미국 서부            ||
| 미국 동부            ||
| 캐나다 중부     ||
|                    ||



&#42;오스트레일리아 중부 및 오스트레일리아 중부 2에 복제하려는 경우 구독이 허용 목록에 포함되어 있어야 합니다. 허용 목록 포함을 요청하려면 https://www.microsoft.com/en-au/central-regions-eligibility/로 이동합니다.

## <a name="scaling"></a>확장
공유 이미지 갤러리를 사용하면 Azure에서 이미지를 보관하도록 하려는 복제본 수를 지정할 수 있습니다. 이렇게 하면 VM 배포를 여러 복제본으로 확대함으로써 단일 복제본 과부하로 인해 인스턴스 생성 처리가 제한될 가능성을 줄일 수 있으므로 다중 VM 배포 시나리오에 도움이 됩니다.

![이미지를 확장하는 방법을 보여 주는 그래픽](./media/shared-image-galleries/scaling.png)


## <a name="replication"></a>복제
공유 이미지 갤러리를 사용하여 다른 Azure 지역에 이미지를 자동으로 복제할 수도 있습니다. 조직에 적합한 방식으로 각 공유 이미지 버전을 여러 지역에 복제할 수 있습니다. 한 가지 예는 다중 지역에서 최신 이미지를 항상 복제하는 것이지만 이전 버전은 모두 1개 지역에서만 사용 가능합니다. 공유 이미지 버전의 스토리지 비용을 절약하는 데 도움이 될 수 있습니다. 

공유 이미지 버전이 복제되는 지역은 생성 시간 후 업데이트할 수 있습니다. 여러 지역에 복제하는 데 걸리는 시간은 복사되는 데이터의 양과 버전이 복제되는 지역 수에 따라 다릅니다. 경우에 따라 몇 시간이 걸릴 수 있습니다. 복제가 진행 중일 때 지역별 복제 상태를 볼 수 있습니다. 한 지역에서 이미지 복제가 완료되면 해당 지역에서 해당 이미지 버전을 사용하여 VM 또는 VMSS를 배포할 수 있습니다.

![이미지를 복제하는 방법을 보여 주는 그래픽](./media/shared-image-galleries/replication.png)


## <a name="access"></a>Access
공유 이미지 갤러리, 공유 이미지 및 공유 이미지 버전은 모두 리소스이므로 기본 제공되는 네이티브 Azure RBAC 컨트롤을 사용하여 공유할 수 있습니다. RBAC를 사용하면 이러한 리소스를 조직의 다른 사용자, 서비스 사용자 및 그룹에 공유할 수 있습니다. 이러한 리소스의 공유 범위는 동일한 Azure AD 테넌트 내에 해당합니다. 사용자가 공유 이미지 버전에 대한 액세스 권한이 있는 경우 공유 이미지 버전과 동일한 Azure AD 테넌트 내에서 액세스 권한이 있는 모든 구독의 VM 또는 Virtual Machine Scale Set를 배포할 수 있습니다.  사용자가 액세스할 수 있는 항목을 이해하는 데 도움이 되는 공유 행렬은 다음과 같습니다.

| 공유한 항목     | 공유 이미지 갤러리 | 공유 이미지 | 공유 이미지 버전 |
|----------------------|----------------------|--------------|----------------------|
| 공유 이미지 갤러리 | 예                  | 예          | 예                  |
| 공유 이미지         | 아닙니다.                   | 예          | 예                  |
| 공유 이미지 버전 | 아닙니다.                   | 아니요           | 예                  |



## <a name="billing"></a>결제
공유 이미지 갤러리 서비스 사용에 대한 추가 비용은 없습니다. 다음 리소스에 대한 비용이 청구됩니다.
- 공유 이미지 버전 저장 시 스토리지 비용. 이는 버전의 복제본 수와 버전이 복제되는 지역 수에 따라 달라집니다.
- 버전의 원본 지역에서 복제된 지역으로 복제하는 데 따른 네트워크 송신 요금.

## <a name="sdk-support"></a>SDK 지원

다음 SDK를 사용하면 공유 이미지 갤러리를 만들 수 있습니다.

- [.NET](https://docs.microsoft.com/dotnet/api/overview/azure/virtualmachines/management?view=azure-dotnet)
- [Java](https://docs.microsoft.com/java/azure/?view=azure-java-stable)
- [Node.JS](https://docs.microsoft.com/javascript/api/azure-arm-compute/?view=azure-node-latest)
- [Python](https://docs.microsoft.com/python/api/overview/azure/virtualmachines?view=azure-python)
- [Go](https://docs.microsoft.com/go/azure/)

## <a name="templates"></a>템플릿

템플릿을 사용하여 공유 이미지 갤러리 리소스를 만들 수 있습니다. 다음의 몇 가지 Azure 빠른 시작 템플릿을 사용할 수 있습니다. 

- [공유 이미지 갤러리 만들기](https://azure.microsoft.com/resources/templates/101-sig-create/)
- [공유 이미지 갤러리에서 이미지 정의 만들기](https://azure.microsoft.com/resources/templates/101-sig-image-definition-create/)
- [공유 이미지 갤러리에서 이미지 버전 만들기](https://azure.microsoft.com/resources/templates/101-sig-image-version-create/)
- [이미지 버전에서 VM 만들기](https://azure.microsoft.com/resources/templates/101-vm-from-sig/)

## <a name="frequently-asked-questions"></a>질문과 대답 

**Q.** 공유 이미지 갤러리 공개 미리 보기에 등록하는 방법은 무엇인가요?
 
 a. 공유 이미지 갤러리 공개 미리 보기에 가입하려면 공유 이미지 갤러리, 이미지 정의 또는 이미지 버전 리소스를 만들고, 이미지 버전을 사용하여 Virtual Machines를 배포하려는 각 구독에서 다음 명령을 실행하여 기능에 등록해야 합니다.

**CLI**: 

```bash 
az feature register --namespace Microsoft.Compute --name GalleryPreview
az provider register --name Microsoft.Compute
```

**PowerShell**: 

```powershell
Register-AzProviderFeature -FeatureName GalleryPreview -ProviderNamespace Microsoft.Compute
Register-AzResourceProvider -ProviderNamespace Microsoft.Compute
```

**Q.** 구독 간에 모든 공유 이미지 갤러리 리소스를 나열하는 방법은 무엇인가요? 
 
 a. Azure Portal에서 액세스할 수 있는 구독 간에 공유 이미지 갤러리 리소스를 모두 나열하려면 아래 단계를 따르세요.

1. [Azure Portal](https://portal.azure.com)을 엽니다.
1. **모든 리소스**로 이동합니다.
1. 모든 리소스를 나열하려는 모든 구독을 선택합니다.
1. **전용 갤러리** 형식의 리소스를 찾습니다.
 
   이미지 정의 및 이미지 버전을 확인하려면 **숨겨진 형식 표시**도 선택해야 합니다.
 
   사용 권한이 있는 구독 간에 공유 이미지 갤러리 리소스를 나열하려면 Azure CLI에서 다음 명령을 사용하세요.

   ```bash
   az account list -otsv --query "[].id" | xargs -n 1 az sig list --subscription
   ```


**Q.** 구독 간에 내 이미지를 공유하려면 어떻게 하나요?
 
 a. RBAC(역할 기반 액세스 제어)를 사용하여 구독에서 이미지를 공유할 수 있습니다. 이미지 버전에 대한 읽기 권한을 갖고 있는(구독 포함) 모든 사용자는 이미지 버전을 사용하여 가상 머신을 배포할 수 있습니다.


**Q.** 기존 이미지를 공유 이미지 갤러리로 이동할 수 있나요?
 
 a. 예. 가지고 있는 이미지의 유형에 따라 3가지 시나리오가 있습니다.

 시나리오 1: 관리형 이미지가 있는 경우 해당 이미지에서 이미지 정의와 이미지 버전을 만들 수 있습니다.

 시나리오 2: 범용 비관리 이미지가 있는 경우 해당 이미지에서 관리형 이미지를 만든 다음 관리형 이미지에서 이미지 정의와 이미지 버전을 만들 수 있습니다. 

 시나리오 3: 로컬 파일 시스템에 VHD가 있는 경우 VHD를 업로드하고 관리형 이미지를 만들어야 합니다. 그리고 나면 해당 이미지에서 이미지 정의와 이미지 버전을 만들 수 있습니다.
- Windows VM의 VHD일 경우 [일반화된 VHD 업로드](https://docs.microsoft.com/azure/virtual-machines/windows/upload-generalized-managed)를 참조하세요.
- Linux VM용 VHD일 경우 [VHD 업로드](https://docs.microsoft.com/azure/virtual-machines/linux/upload-vhd#option-1-upload-a-vhd)를 참조하세요.


**Q.** 특수한 디스크에서 이미지 버전을 만들 수 있나요?

 a. 아니요. 현재는 특수한 디스크를 이미지로 지원하지 않습니다. 특수한 디스크가 있는 경우 새로운 VM에 특수한 디스크를 연결하여 [VHD에서 VM을 생성](https://docs.microsoft.com/azure/virtual-machines/windows/create-vm-specialized-portal#create-a-vm-from-a-disk)해야 합니다. 실행 중인 VM이 있다면 [Windows VM](https://docs.microsoft.com/azure/virtual-machines/windows/tutorial-custom-images) 또는 [Linux VM](https://docs.microsoft.com/azure/virtual-machines/linux/tutorial-custom-images)에서 관리되는 이미지를 만드는 지침을 따라야 합니다. 일반화된 관리되는 이미지가 있을 경우 공유 이미지 설명 및 이미지 버전을 만드는 프로세스를 시작할 수 있습니다.


**Q.** Azure Portal을 통해 공유 이미지 갤러리, 이미지 정의 및 이미지 버전을 만들 수 있나요?

 a. 아니요. 현재 Azure Portal을 통한 공유 이미지 갤러리 리소스 생성은 지원되지 않습니다. 단, CLI, 템플릿 및 SDK를 통한 공유 이미지 갤러리 리소스 생성은 지원되지 않습니다. PowerShell도 곧 출시될 예정입니다.

 
**Q.** 이미지 정의 또는 이미지 버전을 만든 후 업데이트할 수 있나요? 어떤 종류의 세부 정보를 수정할 수 있나요?

 a. 각 리소스에서 업데이트할 수 있는 세부 정보는 아래에 설명되어 있습니다.
 
공유 이미지 갤러리:
- 설명

이미지 정의:
- 권장 vCPU
- 메모리
- 설명
- 수명 주기 끝

이미지 버전:
- 지역 복제본 수
- 대상 지역
- 최신에서 제외
- 수명 주기 끝


**Q.** 공유 이미지 갤러리 리소스를 만든 후 다른 구독으로 이동할 수 있나요?

 a. 아니요. 공유 이미지 갤러리 리소스를 다른 구독으로 이동할 수는 없습니다. 그러나 필요에 따라 갤러리의 이미지 버전을 다른 지역으로 복제할 수는 있습니다.

**Q.** Azure China 21Vianet, Azure Germany 및 Azure Government Cloud 등 클라우드 간에 내 이미지 버전을 복제할 수 있나요? 

 a. 아니요, 클라우드 간에 이미지 버전을 복제할 수는 없습니다.

**Q.** 내 이미지 버전을 구독 간에 복제할 수 있나요? 

 a. 아니요. 구독에서 지역 간에 이미지 버전을 복제하고 RBAC를 통해 다른 구독에서 사용할 수 있습니다.

**Q.** Azure AD 테넌트 간에 이미지 버전을 공유할 수 있나요? 

 a. 아니요. 현재 공유 이미지 갤러리는 Azure AD 테넌트 간에 이미지 버전 공유를 지원하지 않습니다. 그러나 Azure Marketplace에서 전용 제품 기능을 사용하면 이렇게 할 수 있습니다.


**Q.** 대상 지역 간에 이미지 버전을 복제하려면 얼마나 걸리나요?

 a. 이미지 버전 복제 시간은 이미지의 크기와 이미지가 복제되는 지역 수에 따라 크게 달라집니다. 그러나 최상의 결과를 얻으려면 이미지를 작게 유지하고 원본 지역과 대상 지역을 가깝게 유지하는 것이 가장 좋습니다. -ReplicationStatus 플래그를 사용하여 복제의 상태를 확인할 수 있습니다.


**Q.** 구독에서 만들 수 있는 공유 이미지 갤러리는 몇 개인가요?

 a. 기본 할당량은 다음과 같습니다. 
- 지역당, 구독당 공유 이미지 갤러리 10개
- 지역당, 구독당 이미지 정의 200개
- 지역당, 구독당 이미지 버전 2000개


**Q.** 원본 지역과 대상 지역 사이의 차이점은 무엇인가요?

 a. 원본 지역은 이미지 버전이 생성되는 지역이며, 대상 지역은 이미지 버전의 복사본이 저장되는 지역입니다. 각 이미지 버전에 하나의 원본 지역만 사용할 수 있습니다. 또한 이미지 버전을 만들 때 원본 지역 위치를 대상 지역 중 하나로 전달하세요.  


**Q.** 이미지 버전을 만드는 동안 원본 영역을 지정하는 방법은 무엇인가요?

 a. 이미지 버전을 만들 때 CLI의 **--location** 태그와 PowerShell의 **-Location** 태그를 사용하여 원본 지역을 지정할 수 있습니다. 이미지 버전을 만들려면 기본 이미지로 사용 중인 관리되는 이미지가 이미지 버전을 만들려는 위치와 동일한 위치에 있는지 확인하세요. 또한 이미지 버전을 만들 때 원본 지역 위치를 대상 지역 중 하나로 전달하세요.  


**Q.** 각 지역에 만들 이미지 버전 복제본 수를 지정하는 방법은 무엇인가요?

 a. 각 지역에 만들 이미지 버전 복제본 수를 지정하는 방법은 두 가지가 있습니다.
 
1. 지역당 만들려는 복제본의 수를 지정하는 지역당 복제본 수. 
2. 지역당 복제본 수가 지정되지 않은 경우 지역당 기본 개수인 일반적인 복제본 수입니다. 

지역당 복제본 수를 지정하려면 해당 지역에 만들려는 복제본 수와 위치를 전달합니다. 예를 들어 "South Central US=2"를 전달할 수 있습니다. 

각 위치에 지역당 복제본 수가 지정되지 않은 경우 기본 복제본 수가 일반적인 복제본 수로 지정됩니다. 

CLI에서 일반적인 복제본 수를 지정하려면 `az sig image-version create` 명령에 **--replica-count** 인수를 사용합니다.


**Q.** 이미지 정의 및 이미지 버전을 만들려는 위치와 다른 위치에 공유 이미지 갤러리를 만들 수 있나요?

 a. 예, 가능합니다. 하지만 리소스 그룹, 공유 이미지 갤러리, 이미지 정의 및 이미지 버전은 동일한 위치에 유지하는 것이 좋습니다.


**Q.** 공유 이미지 갤러리 사용 요금은 얼마인가요?

 a. 공유 이미지 갤러리 서비스 사용 요금은 없습니다(단, 이미지 버전을 저장할 때 발생하는 저장소 요금과 원본 지역에서 대상 지역으로 이미지 버전을 복제할 때 발생하는 네트워크 송신 요금 제외).

**Q.** 이미지 버전에서 공유 이미지 갤러리, 이미지 정의, 이미지 버전, VM/VMSS를 만들려면 어떤 API 버전을 사용해야 하나요?

 a. 이미지 버전을 사용한 VM 및 Virtual Machine Scale Set 배포의 경우 API 버전 2018-04-01 이상을 사용하는 것이 좋습니다. 공유 이미지 갤러리, 이미지 정의 및 이미지 버전으로 작업하려면 API 버전 2018-06-01을 사용하는 것이 좋습니다. 
